(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{npeL:function(t,e,r){"use strict";var n=r("IOxz"),a=r("k9d2"),i=r("km9M"),o=r("uYCU"),s=r("I6Q3"),u=r("WcYY"),l=r("QSeZ"),c=r("SZDo"),p=r("q1tI"),f=r("nsv0"),d=r("8B+P"),g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function h(t,e){function r(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var v=function(){return(v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function b(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),a=0;for(e=0;e<r;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function m(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var O=Object(n.a)().browser.webkit,x=O&&function(){var t=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase());return!!t&&parseFloat(t[1])<605}(),S="moveable-",j="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=m(1,t),r=m(2,t),n=45*Math.round(t/45)%180,a=135===n?"nwse-resize":45===n?"nesw-resize":90===n?"ew-resize":"ns-resize";return"cursor:"+a+";cursor: url('"+e+"') 16 16, "+a+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+r+"') 2x) 16 16, "+a+";"}(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(x?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",E=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],M=1e-7,y=1e-9,C=Math.pow(10,10),D=-C,R=["n","w","s","e","nw","ne","sw","se"],z={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},G={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},B=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.b.apply(void 0,b([S],t))}function P(t,e,r){return Object(o.q)(e,Object(o.g)(r,e),t,Object(o.g)(r.map((function(t){return-t})),e))}function T(t){return I(ft(t,":before")).map((function(e,r){var n=Object(i.z)(e),a=n.value,o=n.unit;return a*function(t,e,r){return"%"===e?X(t.ownerSVGElement)[r?"width":"height"]/100:1}(t,o,0===r)}))}function I(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function k(t,e,r){for(var n=document.body,a=!t||r?t:t.parentElement,i=!1,o="relative";a&&a!==n;){e===a&&(i=!0);var s=ft(a),u=s.transform;if(o=s.position,"svg"===a.tagName.toLowerCase()||"static"!==o||u&&"none"!==u)break;a=a.parentElement,o="relative"}return{isStatic:"static"===o,isEnd:i||!a||a===n,offsetParent:a||n}}function A(t,e,r,n){var a,o=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;if(n){var l=(e||document.documentElement).getBoundingClientRect();s-=l.left,u-=l.top}var c,p,f=Object(i.s)(s),d=!f;return d||"svg"===o?p=(c=I(r).map((function(t){return parseFloat(t)}))).slice():(p=(c=x?T(t):I(r).map((function(t){return parseFloat(t)}))).slice(),d=!0,s=(a=function(t,e){if(!t.getBBox)return[0,0];var r=t.getBBox(),n=X(t.ownerSVGElement),a=r.x-n.x,i=r.y-n.y;return[a,i,e[0]-a,e[1]-i]}(t,c))[0],u=a[1],c[0]=a[2],c[1]=a[3]),{tagName:o,isSVG:f,hasOffset:d,offset:[s||0,u||0],origin:c,targetOrigin:p}}function N(t,e,r){void 0===r&&(r=window.getComputedStyle(t));var n=window.getComputedStyle(document.body),a=n.position;if(!e&&(!a||"static"===a))return[0,0];var i=parseInt(n.marginLeft,10),o=parseInt(n.marginTop,10);return"absolute"===r.position&&("auto"===r.top&&"auto"===r.bottom||(o=0),"auto"===r.left&&"auto"===r.right||(i=0)),[i,o]}function q(t,e){for(var r,n,a,s,u=t,l=[],c=!1,p=!1,f=3,d=k(e,e,!0).offsetParent;u&&!c;){var g=ft(u),h=g.position,v="fixed"===h,b=Object(o.b)((s=g.transform)&&"none"!==s?Object(i.q)(s)?s:Object(i.w)(s).value.split(/s*,\s*/g).map((function(t){return parseFloat(t)})):[1,0,0,1,0,0]),m=b.length;if(!p&&16===m){p=!0,f=4;for(var x=l.length,S=0;S<x;++S)l[S]=Object(o.c)(l[S],3,4)}p&&9===m&&(b=Object(o.c)(b,3,4));var j=A(u,e,g,v),E=j.tagName,M=j.hasOffset,y=j.isSVG,C=j.origin,D=j.targetOrigin,R=j.offset,z=R[0],G=R[1];"svg"===E&&a?l.push(W(u,f),Object(o.f)(f)):"g"===E&&t!==u&&(z=0,G=0);var B=k(u,e),w=B.offsetParent,T=B.isEnd,I=B.isStatic;O&&M&&!y&&I&&("relative"===h||"static"===h)&&(z-=w.offsetLeft,G-=w.offsetTop,c=c||T);var q=0,F=0;if(M&&d!==w&&(q=w.clientLeft,F=w.clientTop),M&&w===document.body){var Y=N(u,!1,g);z+=Y[0],G+=Y[1]}if(l.push(P(b,f,C),Object(o.g)(M?[z-u.scrollLeft+q,G-u.scrollTop+F]:[u,C],f)),a||(a=b),r||(r=C),n||(n=D),c||v)break;u=w,c=T}return a||(a=Object(o.f)(f)),r||(r=[0,0]),n||(n=[0,0]),{offsetContainer:d,matrixes:l,targetMatrix:a,transformOrigin:r,targetOrigin:n,is3d:p}}function F(t,e,r,n){var a;void 0===r&&(r=e);var s=0,u=0,l=0,c={};if(t){var p=ft(t);s=t.offsetWidth,u=t.offsetHeight,Object(i.s)(s)&&(s=(a=Q(t,p,!0))[0],u=a[1])}if(t){var f=function(t,e,r,n){void 0===r&&(r=e);var a=q(t,e),s=a.matrixes,u=a.is3d,l=a.targetMatrix,c=a.transformOrigin,p=a.targetOrigin,f=q(a.offsetContainer,r),d=f.matrixes,g=f.is3d,h=n||g||u,v=h?4:3,b="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,m=e||document.body,O=l,x=Object(o.f)(v),S=Object(o.f)(v),j=Object(o.f)(v),E=Object(o.f)(v),M=s.length,y=k(m,m,!0).offsetParent;d.reverse(),s.reverse(),!u&&h&&(O=Object(o.c)(O,3,4),s.forEach((function(t,e){s[e]=Object(o.c)(t,3,4)})));!g&&h&&d.forEach((function(t,e){d[e]=Object(o.c)(t,3,4)}));d.forEach((function(t){S=Object(o.r)(S,t,v)})),s.forEach((function(t,e){var r;M-2===e&&(j=x.slice()),M-1===e&&(E=x.slice()),Object(i.q)(t[v*(v-1)])&&(r=function(t,e,r,n,a,i){var s,u=Q(t,void 0,!0),l=u[0],c=u[1],p=e.getBoundingClientRect(),f=[0,0];e===document.body&&(f=N(t,!0));var d=t.getBoundingClientRect(),g=d.left-p.left+e.scrollLeft-(e.clientLeft||0)+f[0],h=d.top-p.top+e.scrollTop-(e.clientTop||0)+f[1],v=d.width,b=d.height,m=Object(o.q)(r,a,i),O=U(m,l,c,r),x=O.left,S=O.top,j=O.width,E=O.height,M=H(m,n,r),y=Object(o.p)(M,[x,S]),C=[g+y[0]*v/j,h+y[1]*b/E],D=[0,0],R=0;for(;++R<10;){var z=Object(o.n)(a,r);s=Object(o.p)(H(z,C,r),H(z,M,r)),D[0]=s[0],D[1]=s[1];var G=U(Object(o.q)(r,a,Object(o.g)(D,r),i),l,c,r),B=G.left-g,w=G.top-h;if(Math.abs(B)<2&&Math.abs(w)<2)break;C[0]-=B,C[1]-=w}return D.map((function(t){return Math.round(t)}))}(t[v*(v-1)],y,v,t[v*(v-1)+1],x,s[e+1]),t[v*(v-1)]=r[0],t[v*(v-1)+1]=r[1]),x=Object(o.r)(x,t,v)}));var C=!b&&u;O||(O=Object(o.f)(C?4:3));var D=Y(b&&16===O.length?Object(o.c)(O,4,3):O,C);return{rootMatrix:S=Object(o.m)(S,v,v),beforeMatrix:j,offsetMatrix:E,allMatrix:x,targetMatrix:O,targetTransform:D,transformOrigin:c,targetOrigin:p,is3d:h}}(t,e,r,n),d=_(f.allMatrix,f.transformOrigin,s,u);c=v(v({},f),d);var g=_(f.allMatrix,[50,50],100,100);l=tt([g.pos1,g.pos2],g.direction)}var h=n?4:3;return v({width:s,height:u,rotation:l,rootMatrix:Object(o.f)(h),beforeMatrix:Object(o.f)(h),offsetMatrix:Object(o.f)(h),allMatrix:Object(o.f)(h),targetMatrix:Object(o.f)(h),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},c)}function Y(t,e){return void 0===e&&(e=t.length>9),(e?"matrix3d":"matrix")+"("+Object(o.d)(t,!e).join(",")+")"}function X(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||r,clientWidth:e,clientHeight:r}}function W(t,e){var r=X(t),n=r.width,a=r.height,i=r.clientWidth,s=r.clientHeight,u=i/n,l=s/a,c=t.preserveAspectRatio.baseVal,p=c.align,f=c.meetOrSlice,d=[0,0],g=[u,l],h=[0,0];if(1!==p){var v=(p-2)%3,b=Math.floor((p-2)/3);d[0]=n*v/2,d[1]=a*b/2;var m=2===f?Math.max(l,u):Math.min(u,l);g[0]=m,g[1]=m,h[0]=(i-n)/2*v,h[1]=(s-a)/2*b}var O=Object(o.i)(g,e);return O[e*(e-1)]=h[0],O[e*(e-1)+1]=h[1],P(O,e,d)}function H(t,e,r){return Object(o.a)(t,Object(o.e)(e,r),r)}function L(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map((function(e){return H(t,e,n)}))}function V(t){var e=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]})),n=Math.min.apply(Math,e),a=Math.min.apply(Math,r),i=Math.max.apply(Math,e),o=Math.max.apply(Math,r);return{left:n,top:a,right:i,bottom:o,width:i-n,height:o-a}}function U(t,e,r,n){return V(L(t,e,r,n))}function _(t,e,r,n){var a=16===t.length?4:3,o=L(t,r,n,a),s=o[0],u=s[0],l=s[1],c=o[1],p=c[0],f=c[1],d=o[2],g=d[0],h=d[1],v=o[3],b=v[0],m=v[1],O=H(t,e,a),x=O[0],S=O[1],j=Math.min(u,p,g,b),E=Math.min(l,f,h,m),M=Math.max(u,p,g,b);return u=u-j||0,{left:j,top:E,right:M,bottom:Math.max(l,f,h,m),origin:[x=x-j||0,S=S-E||0],pos1:[u,l=l-E||0],pos2:[p=p-j||0,f=f-E||0],pos3:[g=g-j||0,h=h-E||0],pos4:[b=b-j||0,m=m-E||0],direction:Object(i.m)(o)}}function Z(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function K(t,e){return Z([e[0]-t[0],e[1]-t[1]])}function $(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=Object(i.l)(t,e));var a=K(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+n+"rad) scaleY("+r+")",width:a+"px"}}function J(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=r.length,i=r.reduce((function(t,e){return t+e[0]}),0)/a,o=r.reduce((function(t,e){return t+e[1]}),0)/a;return{transform:"translateZ(0px) translate("+i+"px, "+o+"px) rotate("+t+"rad) scale("+e+")"}}function Q(t,e,r,n){void 0===e&&(e=window.getComputedStyle(t)),void 0===n&&(n=r||"border-box"===e.boxSizing);var a=t.offsetWidth,o=t.offsetHeight,s=!Object(i.s)(a);if((r||n)&&s)return[a,o];if(!s&&"svg"!==t.tagName.toLowerCase()){var u=t.getBBox();return[u.width,u.height]}return a=t.clientWidth,o=t.clientHeight,r||n?[a+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[a-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)]}function tt(t,e){return Object(i.l)(e>0?t[0]:t[1],e>0?t[1]:t[0])}function et(t,e,r,n,a){var i=1,s=[0,0],u={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},p=F(e,r,a,!1);if(e){var f=p.is3d?4:3,d=_(p.offsetMatrix,Object(o.s)(p.transformOrigin,Object(o.l)(p.targetMatrix,f)),p.width,p.height);i=d.direction,s=Object(o.s)(d.origin,[d.left-p.left,d.top-p.top]),u=rt(e),l=rt(k(n,n,!0).offsetParent||document.body,!0),t&&(c=rt(t))}return v({targetClientRect:u,containerClientRect:l,moveableClientRect:c,beforeDirection:i,beforeOrigin:s,originalBeforeOrigin:s,target:e},p)}function rt(t,e){var r=t.getBoundingClientRect(),n=r.left,a=r.width,i=r.top,o=r.bottom,s={left:n,right:r.right,top:i,bottom:o,width:a,height:r.height};return e&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==ft(t).overflow),s}function nt(t){if(t){var e=t.getAttribute("data-direction");if(e){var r=[0,0];return e.indexOf("w")>-1&&(r[0]=-1),e.indexOf("e")>-1&&(r[0]=1),e.indexOf("n")>-1&&(r[1]=-1),e.indexOf("s")>-1&&(r[1]=1),r}}}function at(t,e){return[Object(o.s)(e,t[0]),Object(o.s)(e,t[1]),Object(o.s)(e,t[2]),Object(o.s)(e,t[3])]}function it(t){var e=t.left,r=t.top;return at([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function ot(t,e){return e?Math.round(t/e)*e:t}function st(t,e){return t.forEach((function(r,n){t[n]=ot(t[n],e)})),t}function ut(t,e){t[e]&&(t[e].unset(),t[e]=null)}function lt(t,e,r){var n=e.datas;n.datas||(n.datas={});var a=v(v({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:n.datas});return n.isStartEvent?n.lastEvent=a:n.isStartEvent=!0,a}function ct(t,e,r){var n=e.datas,a="isDrag"in r?r.isDrag:e.isDrag;return n.datas||(n.datas={}),v(v({isDrag:a},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas})}function pt(t,e,r,n){return t.triggerEvent(e,r,n)}function ft(t,e){return window.getComputedStyle(t,e)}function dt(t,e,r){var n={},a={};return t.filter((function(t){var i=t.name;if(n[i]||!e.some((function(e){return t[e]})))return!1;if(!r&&t.ableGroup){if(a[t.ableGroup])return!1;a[t.ableGroup]=!0}return n[i]=!0,!0}))}function gt(t,e){return t===e||null==t&&null==e}function ht(t,e){var r=[],n=[];return t.forEach((function(a,i){var o=e(a,i,t),s=n.indexOf(o),u=r[s]||[];-1===s&&(n.push(o),r.push(u)),u.push(a)})),r}function vt(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function bt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function mt(t,e,r){return Object(o.a)(Object(o.n)(t,r),Object(o.e)(e,r),r)}function Ot(t,e){var r,n=t.is3d?4:3;return r=mt(t.rootMatrix,[e.distX,e.distY],n),e.distX=r[0],e.distY=r[1],e}function xt(t,e,r,n,a){return Object(o.p)(H(t,Object(o.s)(r,e),a),n)}function St(t,e,r){return r?t/e*100+"%":t+"px"}function jt(t){return Math.abs(t)<=M?0:t}function Et(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:Object(i.n)(t.inputEvent.target,w("direction"))}function Mt(t){var e={};for(var r in t)e[t[r]]=r;return e}function yt(t,e){return t?Object(i.r)(t)?e?document.querySelector(t):t:Object(i.p)(t)?t():"current"in t?t.current:t:null}function Ct(t,e){return t?((r=t)&&Object(i.q)(r)&&(Object(i.o)(r)||"length"in r)?[].slice.call(t):[t]).reduce((function(t,r){return Object(i.r)(r)&&e?b(t,[].slice.call(document.querySelectorAll(r))):(t.push(yt(r,e)),t)}),[]):[];var r}function Dt(t,e){return function(t,e){var r,n=t.direction,a=t.classNames,i=t.size,o=t.pos,s=t.zoom,u=t.key,l="horizontal"===n,c=l?"Y":"X";return e.createElement("div",{key:u,className:a.join(" "),style:(r={},r[l?"width":"height"]=""+i,r.transform="translate("+o[0]+", "+o[1]+") translate"+c+"(-50%) scale"+c+"("+s+")",r)})}(v(v({},t),{classNames:b([w("line","guideline",t.direction)],t.classNames).filter((function(t){return t})),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map((function(t){return t+"px"}))}),e)}var Rt={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,n=e.targets,a=e.angle,i=e.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch"+(n?"Group":"")+"Start",c="drag"+(n?"Group":"")+"ControlStart",p=(!0===s?t.controlAbles:u.filter((function(t){return s.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[c]})),f=lt(t,e,{});n&&(f.targets=n);var d=pt(t,l,f);r.isPinch=!1!==d,r.ables=p;var g=r.isPinch;return!!g&&(p.forEach((function(r){if(i[r.name]=i[r.name]||{},r[c]){var n=v(v({},e),{datas:i[r.name],parentRotate:a,isPinch:!0});r[c](t,n)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},g)},pinch:function(t,e){var r=e.datas,n=e.scale,a=e.distance,i=e.originalDatas,o=e.inputEvent,s=e.targets,u=e.angle;if(r.isPinch){var l=a*(1-1/n),c=lt(t,e,{});s&&(c.targets=s),pt(t,"onPinch"+(s?"Group":""),c);var p=r.ables,f="drag"+(s?"Group":"")+"Control";return p.forEach((function(r){r[f]&&r[f](t,v(v({},e),{datas:i[r.name],inputEvent:o,parentDistance:l,parentRotate:u,isPinch:!0}))})),c}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,a=e.inputEvent,i=e.targets,o=e.originalDatas;if(r.isPinch){var s="onPinch"+(i?"Group":"")+"End",u=ct(t,e,{isDrag:n});i&&(u.targets=i),pt(t,s,u);var l=r.ables,c="drag"+(i?"Group":"")+"ControlEnd";return l.forEach((function(r){r[c]&&r[c](t,v(v({},e),{isDrag:n,datas:o[r.name],inputEvent:a,isPinch:!0}))})),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,v(v({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,v(v({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,v(v({},e),{targets:t.props.targets}))}};function zt(t,e,r,n,a){var i=e.gesto.move(r,t.inputEvent),o=i.originalDatas||i.datas,s=o.draggable||(o.draggable={});return v(v({},a?Ot(e,i):i),{isDrag:!0,isPinch:!!n,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var Gt=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var r=e.originalDatas;return this.datas=r,r.draggable||(r.draggable={}),v(v({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var r,n;return this.isFlag?(r=this.prevX+t[0],n=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0),this.prevX=r,this.prevY=n,{type:"drag",clientX:r,clientY:n,inputEvent:e,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Bt(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas,o=r.inputEvent,s=r.isPinch,u=r.clientX,l=r.clientY,c=r.distX,p=r.distY;return t.moveables.map((function(t,r){return i[r]=i[r]||{},i[r][e]=i[r][e]||{},{inputEvent:o,datas:i[r][e],originalDatas:i[r],isPinch:s,clientX:u,clientY:l,distX:c,distY:p}}))}function wt(t,e,r,n,a,i){var o=!!r.match(/Start$/g),s=!!r.match(/End$/g),u=a.isPinch,l=a.datas,c=Bt(t,e.name,a),p=t.moveables,f=c.map((function(t,a){var c=p[a],f=t;o?f=(new Gt).dragStart(n,t):(c.state.gesto||(c.state.gesto=l.childGestos[a]),f=zt(t,c.state,n,u,i));var d=e[r](c,v(v({},f),{parentFlag:!0}));return s&&(c.state.gesto=null),d}));return o&&(l.childGestos=p.map((function(t){return t.state.gesto}))),f}function Pt(t,e,r,n,a,i){void 0===a&&(a=function(t,e){return e});var o=!!r.match(/End$/g),s=Bt(t,e.name,n),u=t.moveables;return s.map((function(t,n){var s,l=u[n];s=a(l,t);var c=e[r](l,v(v({},s),{parentFlag:!0}));return c&&i&&i(l,t,c,n),o&&(l.state.gesto=null),c}))}function Tt(t,e){var r=e.clientX,n=e.clientY,a=e.datas,i=t.state,s=i.moveableClientRect,u=i.rootMatrix,l=i.is3d,c=i.pos1,p=s.left,f=s.top,d=l?4:3,g=Object(o.p)(mt(u,[r-p,n-f],d),c),h=Ft({datas:a,distX:g[0],distY:g[1]});return[h[0],h[1]]}function It(t,e){var r=e.datas,n=t.state,a=n.allMatrix,i=n.beforeMatrix,s=n.is3d,u=n.left,l=n.top,c=n.origin,p=n.offsetMatrix,f=n.targetMatrix,d=n.transformOrigin,g=s?4:3;r.is3d=s,r.matrix=a,r.targetMatrix=f,r.beforeMatrix=i,r.offsetMatrix=p,r.transformOrigin=d,r.inverseMatrix=Object(o.n)(a,g),r.inverseBeforeMatrix=Object(o.n)(i,g),r.absoluteOrigin=Object(o.e)(Object(o.s)([u,l],c),g),r.startDragBeforeDist=Object(o.a)(r.inverseBeforeMatrix,r.absoluteOrigin,g),r.startDragDist=Object(o.a)(r.inverseMatrix,r.absoluteOrigin,g)}function kt(t,e){var r=t.datas,n=t.originalDatas.beforeRenderable,a=r.transformIndex,i=n.nextTransforms,u=n.nextTransformAppendedIndexes,l=-1===a?i.length:a+u.filter((function(t){return t<a})).length,c=function(t,e){var r=t.slice(0,e<0?void 0:e),n=t.slice(0,e<0?void 0:e+1),a=t[e]||"",i=e<0?[]:t.slice(e),u=e<0?[]:t.slice(e+1),l=Object(s.a)(r),c=Object(s.a)(n),p=Object(s.a)([a]),f=Object(s.a)(i),d=Object(s.a)(u),g=Object(s.c)(l),h=Object(s.c)(c),v=Object(s.c)(f),b=Object(s.c)(d),m=Object(o.r)(g,v,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:h,targetFunctionMatrix:Object(s.c)(p),afterFunctionMatrix:v,afterFunctionMatrix2:b,allFunctionMatrix:m,beforeFunctions:l,beforeFunctions2:c,targetFunction:p[0],afterFunctions:f,afterFunctions2:d,beforeFunctionTexts:r,beforeFunctionTexts2:n,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:u}}(i,l),p=c.targetFunction,f="rotate"===e?"rotateZ":e;r.beforeFunctionTexts=c.beforeFunctionTexts,r.afterFunctionTexts=c.afterFunctionTexts,r.beforeTransform=c.beforeFunctionMatrix,r.beforeTransform2=c.beforeFunctionMatrix2,r.targetTansform=c.targetFunctionMatrix,r.afterTransform=c.afterFunctionMatrix,r.afterTransform2=c.afterFunctionMatrix2,r.targetAllTransform=c.allFunctionMatrix,p.functionName===f?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):(r.isAppendTransform=!0,n.nextTransformAppendedIndexes=b(u,[l]))}function At(t,e,r){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?r:e)+" "+t.afterFunctionTexts.join(" ")}function Nt(t,e,r){var n=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,s=t.afterTransform2,u=t.targetAllTransform,l=r?Object(o.r)(u,e,4):Object(o.r)(e,u,4),c=Object(o.r)(Object(o.n)(r?i:n,4),l,4);return Object(o.r)(c,Object(o.n)(r?s:a,4),4)}function qt(t){var e=t.datas,r=t.distX,n=t.distY,a=e.inverseBeforeMatrix,i=e.is3d,s=e.startDragBeforeDist,u=e.absoluteOrigin,l=i?4:3;return Object(o.p)(Object(o.a)(a,Object(o.s)(u,[r,n]),l),s)}function Ft(t,e){var r=t.datas,n=t.distX,a=t.distY,i=r.inverseBeforeMatrix,s=r.inverseMatrix,u=r.is3d,l=r.startDragBeforeDist,c=r.startDragDist,p=r.absoluteOrigin,f=u?4:3;return Object(o.p)(Object(o.a)(e?i:s,Object(o.s)(p,[n,a]),f),e?l:c)}function Yt(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Xt(t,e){return Yt(e).map((function(e){return t[e]}))}function Wt(t,e){var r=Xt(t,e);return[Object(i.d)(r.map((function(t){return t[0]}))),Object(i.d)(r.map((function(t){return t[1]})))]}function Ht(t,e,r,n){return Object(o.r)(t,P(e,n,r),n)}function Lt(t){var e=t.originalDatas.beforeRenderable;return{setTransform:function(r,n){void 0===n&&(n=-1),e.startTransforms=Object(i.o)(r)?r:Object(i.y)(r),Ut(t,n)},setTransformIndex:function(e){Ut(t,e)}}}function Vt(t){Ut(t,-1)}function Ut(t,e){var r=t.originalDatas.beforeRenderable,n=t.datas;if(n.transformIndex=e,-1!==e){var a=r.startTransforms[e];if(a){var i=Object(s.a)([a]);n.startValue=i[0].functionValue}}}function _t(t,e){t.originalDatas.beforeRenderable.nextTransforms=Object(i.y)(e)}function Zt(t,e,r,n,a){return _t(a,e),{transform:e,drag:er.drag(t,zt(a,t.state,r,n,!1))}}function Kt(t,e,r,n,a){var i=t.state,u=i.left,l=i.top,c=t.props.groupable,p=c?u:0,f=c?l:0,d=Jt(t,r,function(t,e,r){var n=t.transformOrigin,a=t.offsetMatrix,i=t.is3d,u=e.beforeTransform,l=e.afterTransform,c=i?4:3,p=Object(s.b)([r]);return Ht(a,Object(o.c)(Object(o.r)(Object(o.r)(u,p,4),l,4),4,c),n,c)}(t.state,a,e)),g=Object(o.p)(n,d);return Object(o.p)(g,[p,f])}function $t(t){var e=t.state,r=e.width,n=e.height,a=e.transformOrigin;return[a[0]/(r/2)-1,a[1]/(n/2)-1]}function Jt(t,e,r){void 0===r&&(r=t.state.allMatrix);var n=t.state,a=n.width,i=n.height,o=n.is3d?4:3;return H(r,[a/2*(1+e[0]),i/2*(1+e[1])],o)}function Qt(t,e,r,n,a,s){var u=t.props.groupable,l=t.state,c=l.transformOrigin,p=l.targetMatrix,f=l.offsetMatrix,d=l.is3d,g=l.width,h=l.height,v=l.left,b=l.top,m=d?4:3,O=u?v:0,x=u?b:0,S=function(t,e,r,n,a,i){var o=Wt(L(e,r,n,a),i);return[t[0]-o[0],t[1]-o[1]]}(a,Ht(f,p,function(t,e,r,n,a,o){return void 0===n&&(n=e),void 0===a&&(a=r),void 0===o&&(o=[0,0]),t?t.map((function(t,s){var u=Object(i.z)(t),l=u.value,c=u.unit,p=s?a:n,f=s?r:e;return"%"===t||isNaN(l)?f*(p?o[s]/p:0):"%"!==c?l:f*l/100})):o}(s,e,r,g,h,c),m),e,r,m,n);return Object(o.p)(S,[O,x])}function te(t,e){return Wt(it(t.state),e)}function ee(t,e,r){var n=H(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}function re(t,e,r,n,a,i){var o=a[0],s=a[1],u=i[0],l=i[1],c=[],p=n?0:1,f="vertical"===e?"horizontal":"vertical",d=ht(t.filter((function(t){return t.type===e})),(function(t){return t.element})).map((function(t){return t[0]})).filter((function(t){var e=t.pos,r=t.sizes;return e[p]<=l&&u<=e[p]+r[p]}));return d.forEach((function(t){var e=t.pos[n],a=e+t.sizes[n];d.forEach((function(t){var i=t.pos,u=t.sizes,l=t.element,p=t.className,g=i[n],h=g+u[n],v=0,b=0,m=!0;if(a<=g)o<(v=h-(b=a-g))-r&&(m=!1);else{if(!(h<=e))return;s>(v=g-(b=e-h))+r&&(m=!1)}if(m&&c.push({pos:"vertical"===f?[v,i[1]]:[i[0],v],element:l,sizes:u,size:0,type:f,gap:b,className:p,gapGuidelines:d}),a<=o&&s<=g){var O=(g+a-(s-o))/2;ot(o-(O-r),.1)>=0&&c.push({pos:"vertical"===f?[O,i[1]]:[i[0],O],className:p,element:l,sizes:u,size:0,type:f,gap:a-o,gapGuidelines:d})}}))})),c}function ne(t,e,r,n,a,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),n&&n.forEach((function(r){t.push({type:"horizontal",pos:[0,ot(r-o,.1)],size:e})})),a&&a.forEach((function(e){t.push({type:"vertical",pos:[ot(e-i,.1),0],size:r})})),t}function ae(t,e){var r=[];if(!e.length)return r;var n=t.state,a=t.props.snapCenter,i=n.containerClientRect,s=n.targetClientRect,l=s.top,c=s.left,p=n.rootMatrix,f=n.is3d?4:3,d=ee(p,i,f),g=d[0],h=d[1],v=it(n),b=Object(u.c)(v),m=b.minX,O=b.minY,x=Object(o.p)([m,O],mt(p,[c-g,l-h],f)).map((function(t){return e=t,Math.round(e%1===-.5?e-1:e);var e})),S=x[0],j=x[1];return e.forEach((function(t){var e=t.element,n=t.top,i=t.left,o=t.right,s=t.bottom,u=t.className,l=e.getBoundingClientRect(),c=l.left-g,d=l.top-h,v=d+l.height,b=c+l.width,m=mt(p,[c,d],f),O=m[0],x=m[1],E=mt(p,[b,v],f),M=E[0],y=E[1],C=M-O,D=y-x,R=[C,D];!1!==n&&r.push({type:"vertical",element:e,pos:[ot(O+S,.1),x],size:D,sizes:R,className:u}),!1!==s&&r.push({type:"vertical",element:e,pos:[ot(M+S,.1),x],size:D,sizes:R,className:u}),!1!==i&&r.push({type:"horizontal",element:e,pos:[O,ot(x+j,.1)],size:C,sizes:R,className:u}),!1!==o&&r.push({type:"horizontal",element:e,pos:[O,ot(y+j,.1)],size:C,sizes:R,className:u}),a&&(r.push({type:"vertical",element:e,pos:[ot((O+M)/2+S,.1),x],size:D,sizes:R,center:!0,className:u}),r.push({type:"horizontal",element:e,pos:[O,ot((x+y)/2+j,.1)],size:C,sizes:R,center:!0,className:u}))})),r}function ie(t,e,r){void 0===r&&(r=[]);var n=[],a=t.state;if(e&&a.guidelines&&a.guidelines.length)return n;var i=t.props.elementGuidelines,o=void 0===i?[]:i;if(!o.length)return n;var s=a.elementGuidelineValues||[],u=o.map((function(t){return"parentElement"in t?{element:t}:t}));a.elementGuidelineValues=u;var c=Object(l.b)(s.map((function(t){return t.element})),u.map((function(t){return t.element}))),p=c.added,f=c.removed.map((function(t){return s[t].element})),d=ae(t,p.map((function(t){return u[t]})).filter((function(t){return t.refresh&&e||!t.refresh&&!e})));return b(r.filter((function(t){return-1===f.indexOf(t.element)})),d)}function oe(t){var e=t.state,r=e.staticGuidelines,n=e.containerClientRect,a=n.scrollHeight,i=n.scrollWidth,o=n.clientHeight,s=n.clientWidth,u=n.overflow,l=n.clientLeft,c=n.clientTop,p=t.props,f=p.snapHorizontal,d=void 0===f||f,g=p.snapVertical,h=void 0===g||g,v=p.snapGap,m=void 0===v||v,O=p.verticalGuidelines,x=p.horizontalGuidelines,S=p.snapThreshold,j=void 0===S?5:S,E=b(r,ie(t,!0));if(m){var M=V(it(t.state)),y=M.top,C=M.left,D=M.bottom,R=M.right,z=r.filter((function(t){return t.element}));E.push.apply(E,b(re(z,"horizontal",j,0,[C,R],[y,D]),re(z,"vertical",j,1,[y,D],[C,R])))}return ne(E,u?i:s,u?a:o,d&&x,h&&O,l,c),E}function se(t,e,r,n,a){var o=t.props,s=o.snapElement,u=void 0===s||s,l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var a=t[n];if(!Object(i.s)(a))return a}return t[r]}(a,o.snapThreshold,5);return ue(t.state.guidelines,e,r,{snapThreshold:l,snapCenter:n,snapElement:u})}function ue(t,e,r,n){return{vertical:pe(t,"vertical",e,n),horizontal:pe(t,"horizontal",r,n)}}function le(t,e,r,n){var a=t.props.snapCenter&&r,i=["left","right"],o=["top","bottom"];return a&&(i.push("center"),o.push("middle")),i=i.filter((function(t){return t in e})),o=o.filter((function(t){return t in e})),se(t,i.map((function(t){return e[t]})),o.map((function(t){return e[t]})),a,n)}function ce(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:e,offset:a,dist:i,pos:r.pos,guideline:o}}function pe(t,e,r,n){var a=void 0===n?{}:n,i=a.snapThreshold,o=void 0===i?5:i,s=a.snapElement,u=a.snapCenter;if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var l="vertical"===e?0:1,c=r.map((function(r,n){var a=t.map((function(t){var e=t.pos,n=r-e[l];return{offset:n,dist:Math.abs(n),guideline:t}})).filter((function(t){var r=t.guideline,n=t.dist,a=r.type,i=r.center,l=r.element;return!(!s&&l||!u&&i||a!==e||n>o)})).sort((function(t,e){return t.dist-e.dist}));return{pos:r,index:n,guidelineInfos:a}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),p=c.length>0;return{isSnap:p,index:p?c[0].index:-1,posInfos:c}}function fe(t,e){var r=Math.abs(t.offset),n=Math.abs(e.offset);return t.isBound&&e.isBound?n-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?n-r:t.isSnap?-1:e.isSnap||r<M?1:n<M?-1:r-n}function de(t,e){return t.slice().sort((function(t,r){var n=t.sign[e],a=r.sign[e],i=t.offset[e],o=r.offset[e];return n?a?fe({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:r.isBound,isSnap:r.isSnap,offset:o}):-1:1}))[0]}function ge(t,e){var r=Object(i.d)([e[0][0],e[1][0]]),n=Object(i.d)([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function he(t,e){var r,n,a=e[0],i=e[1],o=i[0]-a[0],s=i[1]-a[1];if(Math.abs(o)<M&&(o=0),Math.abs(s)<M&&(s=0),o)if(s){r=s/o*(t[0]-a[0])+a[1],n=t[1]}else r=a[1],n=t[1];else r=a[0],n=t[0];return r-n}function ve(t,e,r){void 0===r&&(r=M);var n=he(t[0],e)<=0;return t.slice(1).every((function(t){var a=he(t,e);return a<=0===n||Math.abs(a)<=r}))}function be(t,e,r,n,a){return void 0===a&&(a=0),n&&e-a<=t||!n&&t<=r+a?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function me(t,e,r,n,a){var i=t[0],o=t[1],s=e[0],u=e[1],l=jt(o[1]-i[1]),c=jt(o[0]-i[0]),p=jt(u[1]-s[1]);if(!jt(u[0]-s[0])){if(a&&!l)return{isBound:!1,offset:0};if(c)return be(l/c*(s[0]-i[0])+i[1],s[1],u[1],r,n);var f=s[0]-i[0];return{isBound:d=Math.abs(f)<=(n||0),offset:d?f:0}}if(!p){if(a&&!c)return{isBound:!1,offset:0};if(l)return be((s[1]-i[1])/(l/c)+i[0],s[0],u[0],r,n);var d;f=s[1]-i[1];return{isBound:d=Math.abs(f)<=(n||0),offset:d?f:0}}return{isBound:!1,offset:0}}function Oe(t,e,r,n){return e.map((function(e){var a=e[0],i=e[1],o=e[2],s=function(t,e,r){var n=t.props.innerBounds;if(!n)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=n.left,i=n.top,o=n.width,s=n.height,u=[[a,i],[a,i+s]],l=[[a,i],[a+o,i]],c=[[a+o,i],[a+o,i+s]],p=[[a,i+s],[a+o,i+s]],f=ge(r,e),d=f.horizontal,g=f.vertical;if(ve([r,[a,i],[a+o,i],[a,i+s],[a+o,i+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var h=me(e,l,g),v=me(e,p,g),b=me(e,u,d),m=me(e,c,d),O=h.isBound&&v.isBound,x=h.isBound||v.isBound,S=b.isBound&&m.isBound,j=b.isBound||m.isBound,E=bt(h.offset,v.offset),M=bt(b.offset,m.offset),y=[0,0],C=!1,D=!1;return Math.abs(M)<Math.abs(E)?(y=[E,0],C=x,D=O):(y=[0,M],C=j,D=S),{isAllBound:D,isVerticalBound:x,isHorizontalBound:j,isBound:C,offset:y}}(t,[i,o],r),u=s.isBound,l=s.offset,c=s.isVerticalBound,p=s.isHorizontalBound,f=Ft({datas:n,distX:l[0],distY:l[1]}).map((function(t,e){return t*(a[e]?2/a[e]:0)}));return{sign:a,isBound:u,isVerticalBound:c,isHorizontalBound:p,isSnap:!1,offset:f}}))}function xe(t,e,r){var n,a=Oe(t,Se(e,[0,0],!1).map((function(t){var e=t[0],r=t[1],n=t[2];return[e.map((function(t){return 2*Math.abs(t)})),r,n]})),Wt(e,[0,0]),r),i=de(a,0),s=de(a,1),u=0,l=0,c=i.isVerticalBound||s.isVerticalBound,p=i.isHorizontalBound||s.isHorizontalBound;return(c||p)&&(u=(n=function(t,e){var r=t.datas,n=t.distX,a=t.distY,i=r.beforeMatrix,s=r.matrix,u=r.is3d,l=r.startDragBeforeDist,c=r.startDragDist,p=r.absoluteOrigin,f=u?4:3;return Object(o.p)(Object(o.a)(e?i:s,Object(o.s)(e?l:c,[n,a]),f),p)}({datas:r,distX:-i.offset[0],distY:-s.offset[1]}))[0],l=n[1]),{vertical:{isBound:c,offset:u},horizontal:{isBound:p,offset:l}}}function Se(t,e,r){return function(t,e){var r=[],n=t[0],a=t[1];return n&&a?r.push([[0,2*a],t,[-n,a]],[[2*n,0],t,[n,-a]]):n?(r.push([[2*n,0],[n,1],[n,-1]]),e&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(r.push([[0,2*a],[1,a],[-1,a]]),e&&r.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}(e,r).map((function(e){var r=e[0],n=e[1],a=e[2];return[r,Wt(t,n),Wt(t,a)]}))}function je(t,e,r,n){var a=n?t.map((function(t){return Object(o.t)(t,n)})):t,i=b([r],e);return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some((function(t,e){return!ve(i,t)}))}function Ee(t,e,r,n,a){var o=t.props.innerBounds,s=a*Math.PI/180;if(!o)return[];var u=o.left,l=o.top,c=o.width,p=o.height,f=u-n[0],d=u+c-n[0],g=l-n[1],h=l+p-n[1],v=[[f,g],[d,g],[f,h],[d,h]],b=Wt(r,[0,0]);if(!je(r,v,b,0))return[];var m=[],O=v.map((function(t){return[Z(t),Object(i.l)([0,0],t)]}));return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach((function(t){var r=Object(i.l)([0,0],function(t){var e=t[0],r=t[1],n=r[0]-e[0],a=r[1]-e[1];if(!n)return[e[0],0];if(!a)return[0,e[1]];var i=a/n,o=-i*e[0]+e[1];return[-o/(i+1/i),o/(i*i+1)]}(t)),n=function(t){var e=t[0],r=t[1],n=r[0]-e[0],a=r[1]-e[1];if(!n)return Math.abs(e[0]);if(!a)return Math.abs(e[1]);var i=a/n;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}(t);m.push.apply(m,O.filter((function(t){var e=t[0];return e&&n<=e})).map((function(t){var e=t[0],a=t[1],i=Math.acos(e?n/e:0);return[s+(a+i)-r,s+(a-i)-r]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!je(e,v,b,t)})).map((function(t){return ot(180*t/Math.PI,M)})))})),m}function Me(t,e,r){var n=t||{},a=n.left,i=void 0===a?-1/0:a,o=n.top,s=void 0===o?-1/0:o,u=n.right,l=void 0===u?1/0:u,c=n.bottom,p={left:i,top:s,right:l,bottom:void 0===c?1/0:c};return{vertical:ye(p,e,!0),horizontal:ye(p,r,!1)}}function ye(t,e,r){var n=t[r?"left":"top"],a=t[r?"right":"bottom"],i=Math.min.apply(Math,e),o=Math.max.apply(Math,e),s=[];return n+1>i&&s.push({isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort((function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)}))}function Ce(t,e,r){return(r?t.map((function(t){return Object(o.t)(t,r)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function De(t,e,r,n,a){var o=t.props.bounds,s=a*Math.PI/180;if(!o)return[];var u=o.left,l=void 0===u?-1/0:u,c=o.top,p=void 0===c?-1/0:c,f=o.right,d=void 0===f?1/0:f,g=o.bottom,h=void 0===g?1/0:g,v=l-n[0],b=d-n[0],m=p-n[1],O=h-n[1],x={left:v,top:m,right:b,bottom:O};if(!Ce(r,x,0))return[];var S=[];return[[v,0],[b,0],[m,1],[O,1]].forEach((function(t,n){var a=t[0],o=t[1];r.forEach((function(t){var r=Object(i.l)([0,0],t);S.push.apply(S,function(t,e,r){var n=Z(t),a=Math.sqrt(n*n-e*e)||0;return[a,-a].sort((function(e,n){return Math.abs(e-t[r?0:1])-Math.abs(n-t[r?0:1])})).map((function(t){return Object(i.l)([0,0],r?[t,e]:[e,t])}))}(t,a,o).map((function(t){return s+t-r})).filter((function(t){return!Ce(e,x,t)})).map((function(t){return ot(180*t/Math.PI,M)})))}))})),S}var Re={horizontal:["left","top","width","Y","X"],vertical:["top","left","height","X","Y"]};function ze(t){var e=t.state;e.guidelines&&e.guidelines.length||(e.staticGuidelines=ie(t,!1),e.guidelines=oe(t),e.enableSnap=!0)}function Ge(t,e){var r=t.props,n=r.snappable,a=r.bounds,i=r.innerBounds,o=r.verticalGuidelines,s=r.horizontalGuidelines,u=t.state,l=u.guidelines,c=u.enableSnap;return!(!n||!c||e&&!0!==n&&n.indexOf(e)<0)&&!!(a||i||l&&l.length||o&&o.length||s&&s.length)}function Be(t,e,r,n,a){var i=function(t,e,r,n){var a=e[0]-t[0],i=e[1]-t[1];Math.abs(a)<M&&(a=0);Math.abs(i)<M&&(i=0);if(!a)return n?[0,0]:[0,r];if(!i)return n?[r,0]:[0,0];var o=i/a,s=t[1]-o*t[0];return n?[r,o*(e[0]+r)+s-e[1]]:[(e[1]+r-s)/o-e[0],r]}(t,e,r,n);if(!i)return[0,0];var o=Ft({datas:a,distX:i[0],distY:i[1]});return[o[0],o[1]]}function we(t,e,r,n,a,i){var s=L(t,e,r,i?4:3),u=function(t,e){return Wt(t,e.map((function(t){return-t})))}(s,a);return at(s,Object(o.p)(n,u))}function Pe(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Te(t,e){return t.isBound?t.offset:e.isSnap?ce(e).offset:0}function Ie(t,e,r,n){var a=function(t,e,r){var n=t.props.bounds||{},a=n.left,i=void 0===a?-1/0:a,s=n.top,u=void 0===s?-1/0:s,l=n.right,c=void 0===l?1/0:l,p=n.bottom,f=void 0===p?1/0:p,d=r[0],g=r[1],h=Object(o.p)(r,e),v=h[0],b=h[1];Math.abs(v)<M&&(v=0),Math.abs(b)<M&&(b=0);var m=b>0,O=v>0,x={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(0===v&&0===b)return{vertical:x,horizontal:S};if(0===v)m?f<g&&(S.pos=f,S.offset=g-f):u>g&&(S.pos=u,S.offset=g-u);else if(0===b)O?c<d&&(x.pos=c,x.offset=d-c):i>d&&(x.pos=i,x.offset=d-i);else{var j=b/v,E=r[1]-j*d,y=0,C=0,D=!1;O&&c<=d?(y=j*c+E,C=c,D=!0):!O&&d<=i&&(y=j*i+E,C=i,D=!0),D&&(y<u||y>f)&&(D=!1),D||(m&&f<=g?(C=((y=f)-E)/j,D=!0):!m&&g<=u&&(C=((y=u)-E)/j,D=!0)),D&&(x.isBound=!0,x.pos=C,x.offset=d-C,S.isBound=!0,S.pos=y,S.offset=g-y)}return{vertical:x,horizontal:S}}(t,e,r),i=a.horizontal,s=a.vertical,u=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var n=r[0],a=r[1],i=e[0],s=e[1],u=Object(o.p)(r,e),l=u[0],c=u[1],p=c>0,f=l>0;l=jt(l),c=jt(c);var d={isSnap:!1,offset:0,pos:0},g={isSnap:!1,offset:0,pos:0};if(0===l&&0===c)return{vertical:d,horizontal:g};var h=se(t,l?[n]:[],c?[a]:[]),v=h.vertical,b=h.horizontal;v.posInfos.filter((function(t){var e=t.pos;return f?e>=i:e<=i})),b.posInfos.filter((function(t){var e=t.pos;return p?e>=s:e<=s})),v.isSnap=v.posInfos.length>0,b.isSnap=b.posInfos.length>0;var m=ce(v),O=m.isSnap,x=m.guideline,S=ce(b),j=S.isSnap,E=S.guideline,M=j?E.pos[1]:0,y=O?x.pos[0]:0;if(0===l)j&&(g.isSnap=!0,g.pos=E.pos[1],g.offset=a-g.pos);else if(0===c)O&&(d.isSnap=!0,d.pos=y,d.offset=n-y);else{var C=c/l,D=r[1]-C*n,R=0,z=0,G=!1;O?(R=C*(z=y)+D,G=!0):j&&(z=((R=M)-D)/C,G=!0),G&&(d.isSnap=!0,d.pos=z,d.offset=n-z,g.isSnap=!0,g.pos=R,g.offset=a-R)}return{vertical:d,horizontal:g}}(t,e,r),l=u.horizontal,c=u.vertical,p=Pe(i,l),f=Pe(s,c),d=Math.abs(p),g=Math.abs(f);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:p,dist:d},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:f,dist:g}}}function ke(t,e,r,n){void 0===n&&(n=r);var a=Me(t.props.bounds,n.map((function(t){return t[0]})),n.map((function(t){return t[1]}))),i=a.horizontal,o=a.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:se(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]})),t.props.snapCenter),u=s.horizontal,l=s.vertical,c=Te(i[0],u),p=Te(o[0],l),f=Math.abs(c),d=Math.abs(p);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:f,bounds:i,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:d,bounds:o,snap:l}}}function Ae(t,e,r,n,a){void 0===a&&(a={});var i=Me(e,r,n),o=i.horizontal,s=i.vertical,u=a.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ue(t,r,n,a),l=u.horizontal,c=u.vertical,p=Te(o[0],l),f=Te(s[0],c),d=Math.abs(p),g=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:d,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:s,snap:c}}}function Ne(t){return t?t/Math.abs(t):0}function qe(t,e,r,n,a,s){return r.map((function(r){var u=r[0],l=r[1],c=Wt(e,u),p=Wt(e,l),f=n?Ie(t,c,p,a):ke(t,a,[p]),d=f.horizontal,g=d.offset,h=d.isBound,v=d.isSnap,b=f.vertical,m=b.offset,O=b.isBound,x=b.isSnap,S=Object(o.p)(l,u);if(!m&&!g)return{isBound:O||h,isSnap:x||v,sign:S,offset:[0,0]};var j=function(t,e,r,n){var a=Object(i.l)(t,e)/Math.PI*180,o=r.vertical,s=o.isBound,u=o.isSnap,l=o.dist,c=r.horizontal,p=c.isBound,f=c.isSnap,d=a%180,g=d<3||d>177,h=d>87&&d<93;return c.dist<l&&(s||u&&!h&&(!n||!g))?"vertical":!p&&(!f||g||n&&h)?"":"horizontal"}(c,p,f,n);if(!j)return{sign:S,isBound:!1,isSnap:!1,offset:[0,0]};var E="vertical"===j,M=Be(c,p,-(E?m:g),E,s).map((function(t,e){return t*(S[e]?2/S[e]:0)}));return{sign:S,isBound:E?O:h,isSnap:E?x:v,offset:M}}))}function Fe(t,e,r,n,a,i){var o=function(t,e){var r=[],n=[-t[0],-t[1]];return t[0]&&t[1]?(r.push([n,[t[0],-t[1]]],[n,[-t[0],t[1]]]),e&&r.push([n,t])):t[0]?e?r.push([n,[n[0],-1]],[n,[n[0],1]],[n,[t[0],-1]],[n,t],[n,[t[0],1]]):r.push([[n[0],-1],[t[0],-1]],[[n[0],0],[t[0],0]],[[n[0],1],[t[0],1]]):t[1]?e?r.push([n,[-1,n[1]]],[n,[1,n[1]]],[n,[-1,t[1]]],[n,[1,t[1]]],[n,t]):r.push([[-1,n[1]],[-1,t[1]]],[[0,n[1]],[0,t[1]]],[[1,n[1]],[1,t[1]]]):r.push([n,[1,0]],[n,[-1,0]],[n,[0,-1]],[n,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),r}(r,n),s=Se(e,r,n),u=b(qe(t,e,o,n,a,i),Oe(t,s,Wt(e,[0,0]),i)),l=de(u,0),c=de(u,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function Ye(t,e,r,n,a,o,s,u){for(var l=it(t.state),c=t.props.keepRatio,p=0,f=0,d=0;d<2;++d){var g=Fe(t,e(p,f),a,c,s,u),h=g.width,v=g.height,b=h.isBound,m=v.isBound,O=h.offset,x=v.offset;if(1===d&&(b||(O=0),m||(x=0)),0===d&&s&&!b&&!m)return[0,0];if(c){var S=Math.abs(O)*(r?1/r:1),j=Math.abs(x)*(n?1/n:1);(b&&m?S<j:m||!b&&S<j)?O=r*x/n:x=n*O/r}p+=O,f+=x}if(a[0]&&a[1]){var E=function(t,e,r,n,a){var o=[-r[0],-r[1]],s=t.state,u=s.width,l=s.height,c=t.props.bounds,p=1/0,f=1/0;if(c){var d=[[r[0],-r[1]],[-r[0],r[1]]],g=c.left,h=void 0===g?-1/0:g,v=c.top,b=void 0===v?-1/0:v,m=c.right,O=void 0===m?1/0:m,x=c.bottom,S=void 0===x?1/0:x;d.forEach((function(t){var r=t[0]!==o[0],s=t[1]!==o[1],c=Wt(e,t),d=Ne(t[1]-o[1]),g=Ne(t[0]-o[0]),v=360*Object(i.l)(n,c)/Math.PI;if(s){var m=c.slice();(Math.abs(v-360)<2||Math.abs(v-180)<2)&&(m[1]=n[1]);var x=Be(n,m,(n[1]<c[1]?S:b)-c[1],!1,a)[1];isNaN(x)||(f=l+d*x)}if(r){m=c.slice(),(Math.abs(v-90)<2||Math.abs(v-270)<2)&&(m[0]=n[0]);var j=Be(n,m,(n[0]<c[0]?O:h)-c[0],!0,a)[0];isNaN(j)||(p=u+g*j)}}))}return{maxWidth:p,maxHeight:f}}(t,l,a,o,u),M=E.maxWidth,y=E.maxHeight,C=function(t,e,r,n,a,i,o,s,u){var l=ke(t,s,[Wt(e,o)]),c=l.horizontal.offset,p=l.vertical.offset;if(p||c){var f=Ft({datas:u,distX:-p,distY:-c}),d=f[0],g=f[1];return[Math.min(a||1/0,r+o[0]*d)-r,Math.min(i||1/0,n+o[1]*g)-n]}return[0,0]}(t,e(p,f),r+p,n+f,M,y,a,s,u);p+=O=C[0],f+=x=C[1]}return[p,f]}function Xe(t,e,r,n){if(!Ge(t,"rotatable"))return n;var a=e.pos1,i=e.pos2,s=e.pos3,u=e.pos4,l=n*Math.PI/180,c=[a,i,s,u].map((function(t){return Object(o.p)(t,r)})),p=c.map((function(t){return Object(o.t)(t,l)})),f=b(De(t,c,p,r,n),Ee(t,c,p,r,n));return f.sort((function(t,e){return Math.abs(t-n)-Math.abs(e-n)})),f.length?f[0]:n}function We(t,e,r,n,a){var i=a.width,s=a.height,u=a.fixedPosition;if(!Ge(t,"scalable"))return[0,0];var l=a.is3d,c=Ye(t,(function(t,n){return we(function(t,e){var r=t.transformOrigin,n=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,s=a?4:3;return Ht(n,Object(o.r)(i,Object(o.i)(e,s),s),r,s)}(a,Object(o.s)(e,[t/i,n/s])),i,s,u,r,l)}),i,s,r,u,n,a);return[c[0]/i,c[1]/s]}function He(t,e,r,n,a,i){if(!Ge(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=at(i.absolutePoses,[e,r]),u=V(s),l=u.left,c=u.right,p=u.top,f=u.bottom,d=[[l,p],[c,p],[l,f],[c,f]];t.props.snapCenter&&d.push([(l+c)/2,(p+f)/2]);var g=ke(t,a,d,s),h=g.vertical,v=g.horizontal,b=xe(t,s,i),m=b.vertical,O=b.horizontal,x=h.isSnap,S=v.isSnap,j=h.isBound||m.isBound,E=v.isBound||O.isBound,y=function(t,e,r,n,a){var i=e[0],s=e[1],u=r[0],l=r[1],c=n[0],p=n[1],f=a[0],d=a[1],g=-f,h=-d;if(t&&i&&s){g=0,h=0;var v=[];if(u&&l?v.push([0,d],[f,0]):u?v.push([f,0]):l?v.push([0,d]):c&&p?v.push([0,d],[f,0]):c?v.push([f,0]):p&&v.push([0,d]),v.length){v.sort((function(t,e){return Z(Object(o.p)([i,s],t))-Z(Object(o.p)([i,s],e))}));var b=v[0];if(b[0]&&Math.abs(i)>M)g=-b[0],h=s*Math.abs(i+g)/Math.abs(i)-s;else if(b[1]&&Math.abs(s)>M){var m=s;h=-b[1],g=i*Math.abs(s+h)/Math.abs(m)-i}if(t&&l&&u)if(Math.abs(g)>M&&Math.abs(g)<Math.abs(f))g*=O=Math.abs(f)/Math.abs(g),h*=O;else if(Math.abs(h)>M&&Math.abs(h)<Math.abs(d)){var O;g*=O=Math.abs(d)/Math.abs(h),h*=O}else g=bt(-f,g),h=bt(-d,h)}}else g=i||u?-f:0,h=s||l?-d:0;return[g,h]}(n,[e,r],[j,E],[x,S],[bt(h.offset,m.offset),bt(v.offset,O.offset)]);return[{isBound:j,isSnap:x,offset:y[0]},{isBound:E,isSnap:S,offset:y[1]}]}function Le(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var r=t.guideline;e.indexOf(r)>-1||e.push(r)}))})),e}function Ve(t,e,r,n){var a=t-r,i=a<0?a+e:n;return{size:(a<0?0:a)-i,pos:i}}function Ue(t,e,r,n){var a=[],o=ht(t.filter((function(t){var e=t.element,r=t.gap;return e&&!r})),(function(t){var r=t.element,o=t.pos,s=o[n],u=(Math.min(0,s-e)<0?-1:1)+"_"+o[n?0:1],l=Object(i.h)(a,(function(t){var e=t[0],n=t[1];return r===e&&s===n}));return l?l[2]:(a.push([r,s,u]),u)}));return o.forEach((function(t){t.sort((function(t,a){return Ve(t.pos[n],t.size,e,r).size-Ve(a.pos[n],t.size,e,r).size||t.pos[n?0:1]-a.pos[n?0:1]}))})),o}function _e(t,e,r,n,a,i,o,s,u,l,c,p){var f=t.props,d=f.zoom,g=f.isDisplaySnapDigit,h=void 0===g||g,v=Re[e],b=v[0],m=v[1],O=v[2],x=v[4];return vt(r.map((function(t,r){var f=!0;return t.map((function(t,g){var v,S=t.pos,j=t.size,E=Ve(S[l],j,a,i),M=E.pos,y=E.size;if(y<s)return null;var C=f;f=!1;var D=h&&C?parseFloat(y.toFixed(u)):0;return p.createElement("div",{key:e+"LinkGuideline"+r+"-"+g,className:w("guideline-group",e),style:(v={},v[b]=n+M+"px",v[m]=-o+S[l?0:1]+"px",v[O]=y+"px",v)},Dt({direction:e,classNames:[w("dashed")],size:"100%",posValue:[0,0],sizeValue:y,zoom:d},p),p.createElement("div",{className:w("size-value"),style:{transform:"translate"+x+"(-50%) scale("+d+")"}},D>0?c(D):""))}))})))}function Ze(t,e,r,n,a,i,o,s){var u=t.props.zoom;return r.map((function(t,r){var l=t.type,c=t.pos,p=[0,0];return p[o]=n,p[o?0:1]=-a+c,Dt({key:e+"TargetGuideline"+r,classNames:[w("target","bold",l)],posValue:p,sizeValue:i,zoom:u,direction:e},s)}))}function Ke(t,e,r,n,a){var i=t.props.zoom;return r.map((function(t,r){var o=t.pos,s=t.size,u=t.element,l=[-n[0]+o[0],-n[1]+o[1]];return Dt({key:e+"Guideline"+r,classNames:u?[w("bold")]:[],direction:e,posValue:l,sizeValue:s,zoom:i},a)}))}function $e(t,e,r,n){var a=t.filter((function(t){var r=t.element,n=t.gap,a=t.type;return r&&n&&a===e})),i="vertical"===e?[0,1]:[1,0],o=i[0],s=i[1];return vt(a.map((function(t){var e=t.pos,a=t.gap,i=t.gapGuidelines,u=t.sizes,l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(t)-Math.abs(e)})),t[0]}(e[s]+u[s]-r[s],e[s]-r[s]-n[s]),c=Math.min(u[s],n[s]);l>0&&l>c?l=2*(l-c/2):l<0&&l<-c&&(l=2*(l+c/2));var p=(l>0?0:n[s])+l/2;return b(function(t,e,r,n,a,i,o){var s=Math.abs(i),u=a[e]+(i>0?n[0]:0);return t.filter((function(t){return t.pos[e]<=r[e]})).sort((function(t,r){var n=t.pos;return r.pos[e]-n[e]})).filter((function(t){var r=t.pos,n=t.sizes,a=r[e];return ot(a+n[e],1e-4)===ot(u-s,1e-4)&&(u=a,!0)})).map((function(t){var n=-r[e]+t.pos[e]+t.sizes[e];return v(v({},t),{gap:i,renderPos:e?[o,n]:[n,o]})}))}(i,o,r,n,e,a,p),function(t,e,r,n,a,i,o){var s=Math.abs(i),u=a[e]+(i<0?n[e]:0);return t.filter((function(t){return t.pos[e]>r[e]})).sort((function(t,r){var n=t.pos,a=r.pos;return n[e]-a[e]})).filter((function(t){var r=t.pos,n=t.sizes,a=r[e];return ot(a,1e-4)===ot(u+s,1e-4)&&(u=a+n[e],!0)})).map((function(t){var n=-r[e]+t.pos[e]-s;return v(v({},t),{gap:i,renderPos:e?[o,n]:[n,o]})}))}(i,o,r,n,e,a,p))})))}function Je(t,e,r,n,a){var i=t.props,o=i.snapDigit,s=void 0===o?0:o,u=i.isDisplaySnapDigit,l=void 0===u||u,c=i.zoom,p="horizontal"===e?"X":"Y",f="horizontal"===e?"width":"height";return r.map((function(t,r){var i,o=t.renderPos,u=t.gap,d=t.className,g=Math.abs(u),h=l?parseFloat(g.toFixed(s)):0;return a.createElement("div",{key:e+"GapGuideline"+r,className:w("guideline-group",e),style:(i={left:o[0]+"px",top:o[1]+"px"},i[f]=g+"px",i)},Dt({direction:e,classNames:[w("gap"),d],size:"100%",posValue:[0,0],sizeValue:g,zoom:c},a),a.createElement("div",{className:w("size-value","gap"),style:{transform:"translate"+p+"(-50%) scale("+c+")"}},h>0?n(h):""))}))}function Qe(t,e,r,n,a,o){var s=Me(o||t.props.bounds,e,r),u=s.vertical,l=s.horizontal;u.forEach((function(t){t.isBound&&n.push({type:"bounds",pos:t.pos})})),l.forEach((function(t){t.isBound&&a.push({type:"bounds",pos:t.pos})}));var c=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var r=t.getRect(),n=r.pos1,a=r.pos2,i=r.pos3,o=r.pos4,s=Wt([n,a,i,o],[0,0]),u=e.left,l=e.top,c=e.width,p=e.height,f=[[u,l],[u,l+p]],d=[[u,l],[u+c,l]],g=[[u+c,l],[u+c,l+p]],h=[[u,l+p],[u+c,l+p]],v=[],b=[],m={top:!1,bottom:!1,left:!1,right:!1};return[[n,a],[a,o],[o,i],[i,n]].forEach((function(t){var e=ge(s,t),r=e.horizontal,n=e.vertical,a=me(t,d,n,1,!0),i=me(t,h,n,1,!0),o=me(t,f,r,1,!0),O=me(t,g,r,1,!0);a.isBound&&!m.top&&(v.push(l),m.top=!0),i.isBound&&!m.bottom&&(v.push(l+p),m.bottom=!0),o.isBound&&!m.left&&(b.push(u),m.left=!0),O.isBound&&!m.right&&(b.push(u+c),m.right=!0)})),{horizontal:v,vertical:b}}(t),p=c.vertical,f=c.horizontal;p.forEach((function(t){Object(i.i)(n,(function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t}))>=0||n.push({type:"bounds",pos:t})})),f.forEach((function(t){Object(i.i)(a,(function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t}))>=0||a.push({type:"bounds",pos:t})}))}var tr={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var r=t.state,n=r.top,a=r.left,i=r.pos1,o=r.pos2,s=r.pos3,u=r.pos4,l=r.snapRenderInfo,c=r.targetClientRect,p=r.containerClientRect,f=r.is3d,d=r.rootMatrix;if(!l||!Ge(t,""))return[];var g=f?4:3,h=Math.min(i[0],o[0],s[0],u[0]),v=Math.min(i[1],o[1],s[1],u[1]),m=ee(d,p,g),O=mt(d,[c.left-m[0],c.top-m[1]],g),x=O[0],S=O[1],j=t.props,E=j.snapThreshold,M=void 0===E?5:E,y=j.snapDigit,C=void 0===y?0:y,D=j.snapDistFormat,R=void 0===D?function(t){return t}:D,z=l.externalPoses||[],G=it(t.state),B=[],w=[],P=[],T=[],I=[],k=V(G),A=k.width,N=k.height,q=k.top,F=k.left,Y=k.bottom,X=k.right,W=z.length>0,H=W?V(z):{};if(!l.request){if(l.direction&&I.push(function(t,e,r){var n=[];if(r[0]&&r[1])n=[r,[-r[0],r[1]],[r[0],-r[1]]].map((function(t){return Wt(e,t)}));else if(r[0]||r[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],r].map((function(t){return Wt(e,t)})):(n=Xt(e,r)).length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]);else for(var a=[e[0],e[1],e[3],e[2],e[0]],i=0;i<4;++i)n.push(a[i]),n.push([(a[i][0]+a[i+1][0])/2,(a[i][1]+a[i+1][1])/2]);return se(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]})),!0,1)}(t,G,l.direction)),l.snap){var L=V(G);l.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),I.push(le(t,L,!0,1))}W&&(l.center&&(H.middle=(H.top+H.bottom)/2,H.center=(H.left+H.right)/2),I.push(le(t,H,!0,1))),I.forEach((function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;B.push.apply(B,e.map((function(t){return{type:"snap",pos:t.pos}}))),w.push.apply(w,r.map((function(t){return{type:"snap",pos:t.pos}}))),P.push.apply(P,Le(e)),T.push.apply(T,Le(r))}))}Qe(t,[F,X],[q,Y],B,w),W&&Qe(t,[H.left,H.right],[H.top,H.bottom],B,w,l.externalBounds);var U=Ue(T,x,A,0),_=Ue(P,S,N,1),Z=$e(P,"vertical",[a,n],[A,N]),K=$e(T,"horizontal",[a,n],[A,N]),$=b(P,T);return pt(t,"onSnap",{guidelines:$.filter((function(t){return!t.element})),elements:ht($.filter((function(t){return t.element})),(function(t){return t.element})),gaps:b(K,Z)},!0),b(Je(t,"vertical",K,R,e),Je(t,"horizontal",Z,R,e),_e(t,"horizontal",U,h,x,A,n,M,C,0,R,e),_e(t,"vertical",_,v,S,N,a,M,C,1,R,e),Ze(t,"horizontal",w,h,n,A,0,e),Ze(t,"vertical",B,v,a,N,1,e),Ke(t,"horizontal",T,[a,n],e),Ke(t,"vertical",P,[a,n],e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},ze(t)},drag:function(t){var e=t.state;e.staticGuidelines=ie(t,!1,e.staticGuidelines),e.guidelines=oe(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!Et(t)&&!cr(t,e))||(!t.isRequest&&t.inputEvent?Object(i.n)(t.inputEvent.target,w("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,ze(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ze(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.staticGuidelines=[],e.guidelines=[],e.snapRenderInfo=null}},er={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var r=t.props,n=r.throttleDragRotate,a=r.zoom,o=t.state,s=o.dragInfo,u=o.beforeOrigin;if(!n||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=Z(l),p=Object(i.l)(l,[0,0]);return[e.createElement("div",{className:w("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:c+"px",transform:"translate("+u[0]+"px, "+u[1]+"px) rotate("+p+"rad) scaleY("+a+")"}})]},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,a=e.parentGesto,i=t.state,o=i.target;if(i.gesto)return!1;i.gesto=a||t.targetGesto;var s=window.getComputedStyle(o);r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],It(t,e),Vt(e),function(t,e){e.absolutePoses=it(t.state)}(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1;var u=lt(t,e,v({set:function(t){r.startValue=t}},Lt(e)));return!1!==(n||pt(t,"onDragStart",u))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(i.gesto=null,r.isPinch=!1),!!r.isDrag&&u},drag:function(t,e){kt(e,"translate");var r=e.datas,n=e.parentEvent,a=e.parentFlag,s=e.isPinch,u=e.isRequest,l=e.distX,c=e.distY,p=r.isDrag,f=r.prevDist,d=r.prevBeforeDist,g=r.startValue;if(p){var h=t.props,v=h.parentMoveable,b=n?0:h.throttleDrag||0,m=n?0:h.throttleDragRotate||0,O=!1,x=0;if(!n&&m>0&&(l||c)){var S=h.startDragRotate||0,j=ot(S+180*Object(i.l)([0,0],[l,c])/Math.PI,m)-S,E=c*Math.abs(Math.cos((j-90)/180*Math.PI)),M=Z([l*Math.abs(Math.cos(j/180*Math.PI)),E]);x=j*Math.PI/180,l=M*Math.cos(x),c=M*Math.sin(x)}if(!s&&!n&&!a&&(!m||l||c)){var y=He(t,l,c,m,u,r),C=y[0],D=y[1],R=C.isSnap,z=C.isBound,G=C.offset,B=D.isSnap,w=D.isBound;O=R||B||z||w,l+=G,c+=D.offset}r.passDeltaX=l-(r.passDistX||0),r.passDeltaY=c-(r.passDistY||0),r.passDistX=l,r.passDistY=c;var P=Object(o.s)(qt({datas:r,distX:l,distY:c}),g),T=Object(o.s)(function(t){var e=t.datas,r=qt({datas:e,distX:t.distX,distY:t.distY}),n=r[0],a=r[1],i=Nt(e,Object(o.k)([n,a],4));return Object(o.a)(i,Object(o.e)([0,0,0],4),4)}({datas:r,distX:l,distY:c}),g);m||O||(st(T,b),st(P,b));var I=Object(o.p)(P,g),k=Object(o.p)(T,g),A=Object(o.p)(k,f),N=Object(o.p)(I,d);r.prevDist=k,r.prevBeforeDist=I;var q=r.left+I[0],F=r.top+I[1],Y=r.right-I[0],X=r.bottom-I[1],W=At(r,"translate("+T[0]+"px, "+T[1]+"px)","translate("+k[0]+"px, "+k[1]+"px)");if(t.state.dragInfo.dist=n?[0,0]:k,n||v||!A.every((function(t){return!t}))||!N.some((function(t){return!t}))){var H=t.state,L=lt(t,e,{transform:W,dist:k,delta:A,translate:T,beforeDist:I,beforeDelta:N,beforeTranslate:P,left:q,top:F,right:Y,bottom:X,width:H.width,height:H.height,isPinch:s});return!n&&pt(t,"onDrag",L),L}}},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas,a=e.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,n.isDrag)return n.isDrag=!1,!r&&pt(t,"onDragEnd",ct(t,e,{})),a},dragGroupStart:function(t,e){var r=e.datas,n=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var o=wt(t,this,"dragStart",[n||0,a||0],e,!1),s=pt(t,"onDragGroupStart",v(v({},i),{targets:t.props.targets,events:o}));return r.isDrag=!1!==s,!!r.isDrag&&i},dragGroup:function(t,e){if(e.datas.isDrag){var r=this.drag(t,e),n=e.datas,a=wt(t,this,"drag",[n.passDeltaX,n.passDeltaY],e,!1);if(r){var i=v({targets:t.props.targets,events:a},r);return pt(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),wt(t,this,"dragEnd",[0,0],e,!1),pt(t,"onDragGroupEnd",ct(t,e,{targets:t.props.targets})),r},request:function(t){var e={},r=t.getRect(),n=0,a=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?a=t.y-r.top:"deltaY"in t&&(a+=t.deltaY),{datas:e,distX:n,distY:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function rr(t,e,r){var n=t.state,a=n.renderPoses,i=n.rotation,o=n.direction,s=t.props,u=s.renderDirections,l=void 0===u?e:u,c=s.zoom,p={};if(!l)return[];var f=o>0?1:-1,d=!0===l?R:l,g=i/Math.PI*180;return d.forEach((function(t){p[t]=!0})),d.map((function(t){var e=z[t];if(!e||!p[t])return null;var n=(ot(g,15)+f*G[t]+720)%180;return r.createElement("div",{className:w("control","direction",t),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:J.apply(void 0,b([i,c],e.map((function(t){return a[t]}))))})}))}function nr(t,e,r,n,a,o){for(var s=[],u=6;u<arguments.length;u++)s[u-6]=arguments[u];var l=Object(i.l)(r,n),c=e?ot(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:w.apply(void 0,b(["line","direction",e],s)),"data-rotation":c,"data-line-index":o,"data-direction":e,style:$(r,n,a,l)})}function ar(t,e){return rr(t,R,e)}function ir(t,e){return rr(t,["nw","ne","sw","se"],e)}function or(t,e,r,n,a,s){var u=t.state.is3d?4:3,l=H(t.state.rootMatrix,a,u),c=Object(o.s)([s.left,s.top],l);e.startAbsoluteOrigin=c,e.prevDeg=Object(i.l)(c,[r,n])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function sr(t,e,r,n,a,i){var o=r.prevDeg,s=Xe(t,e,r.origin,n);return r.prevDeg=s,[s-o,s,i+s]}function ur(t,e,r,n,a,i,o,s){var u=r.prevDeg,l=r.prevSnapDeg,c=r.startDeg,p=r.loop;u>n&&u>270&&n<90?++r.loop:u<n&&u<90&&n>270&&--r.loop;var f=r.loop,d=360*p+l-c+i,g=360*f+n-c+i;r.prevDeg=g-360*f+c-i;var h=a*((g=ot(g,o))-i);return s&&(g=(h=Xe(t,e,r.origin,h))/a+i),r.prevSnapDeg=g-360*f+c-i,[a*(g-d),h,i+h]}function lr(t,e,r,n,a,o,s,u){return ur(t,e,r,Object(i.l)(r.startAbsoluteOrigin,[a,o])/Math.PI*180,n,s,u,!0)}function cr(t,e){if(t.isRequest)return"rotatable"===t.requestAble;var r=t.inputEvent.target;if(Object(i.n)(r,w("rotation-control")))return!0;var n=e.props.rotationTarget;return!!n&&(console.log(Ct(n,!0)),Ct(n,!0).some((function(t){return!!t&&(r===t||r.contains(t))})))}var pr={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,e){var r=t.props,n=r.rotatable,a=r.rotationPosition,i=r.zoom,o=r.renderDirections,s=t.state,u=s.renderPoses,l=s.direction;if(!n)return null;var c=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],c=[n,a];"left"===u?c=[i,n]:"right"===u?c=[a,o]:"bottom"===u&&(c=[o,i]);var p=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],f=tt(c,r);if(l){var d="top"===l||"left"===l,g="bottom"===u||"left"===u;p=c[d&&!g||!d&&g?0:1]}return[p,f]}}(a,u,l),p=[];if(c){var f=c[0],d=c[1];p.push(e.createElement("div",{key:"rotation",className:w("rotation"),style:{transform:"translate(-50%) translate("+f[0]+"px, "+f[1]+"px) rotate("+d+"rad)"}},e.createElement("div",{className:w("line rotation-line"),style:{transform:"scaleX("+i+")"}}),e.createElement("div",{className:w("control rotation-control"),style:{transform:"translate(0.5px) scale("+i+")"}})))}return o&&p.push.apply(p,rr(t,[],e)),p},dragControlCondition:cr,dragControlStart:function(t,e){var r=e.datas,n=e.clientX,a=e.clientY,i=e.parentRotate,o=e.parentFlag,s=e.isPinch,u=e.isRequest,l=t.state,c=l.target,p=l.left,f=l.top,d=l.origin,g=l.beforeOrigin,h=l.direction,b=l.beforeDirection,m=l.targetTransform,O=l.moveableClientRect;if(!u&&!c)return!1;var x=t.getRect();if(r.rect=x,r.transform=m,r.left=p,r.top=f,r.fixedPosition=Jt(t,$t(t)),r.absoluteInfo={origin:x.origin,startValue:x.rotation},or(t,r.absoluteInfo,n,a,d,O),u||s||o){var S=i||0;r.beforeInfo={origin:x.beforeOrigin,prevDeg:S,startDeg:S,prevSnapDeg:S,loop:0},r.afterInfo={origin:x.origin,prevDeg:S,startDeg:S,prevSnapDeg:S,loop:0}}else r.beforeInfo={origin:x.beforeOrigin},r.afterInfo={origin:x.origin},or(t,r.beforeInfo,n,a,g,O),or(t,r.afterInfo,n,a,d,O);r.direction=h,r.beforeDirection=b,r.startValue=0,r.datas={},Vt(e);var j=lt(t,e,v(v({set:function(t){r.startValue=t*Math.PI/180}},Lt(e)),{dragStart:er.dragStart(t,(new Gt).dragStart([0,0],e))})),E=pt(t,"onRotateStart",j);return r.isRotate=!1!==E,t.state.snapRenderInfo={request:e.isRequest},!!r.isRotate&&j},dragControl:function(t,e){var r,n,a,i,s,u,l,c,p,f=e.datas,d=e.clientX,g=e.clientY,h=e.parentRotate,b=e.parentFlag,m=e.isPinch,O=e.groupDelta,x=f.beforeDirection,S=f.beforeInfo,j=f.afterInfo,E=f.absoluteInfo,M=f.isRotate,y=f.startValue,C=f.rect;if(M){kt(e,"rotate");var D,R,z,G,B,w,P,T,I,k=x*function(t){return _(t.datas.beforeTransform,[50,50],100,100).direction}(e),A=t.props,N=A.throttleRotate,q=void 0===N?0:N,F=A.parentMoveable,Y=180/Math.PI*y,X=E.startValue;if(!b&&"parentDist"in e){var W=e.parentDist;D=(r=sr(t,C,j,W,0,Y))[0],R=r[1],z=r[2],G=(n=sr(t,C,S,W,0,Y))[0],B=n[1],w=n[2],P=(a=sr(t,C,E,W,0,X))[0],T=a[1],I=a[2]}else m||b?(D=(i=ur(t,C,j,h,k,Y,q))[0],R=i[1],z=i[2],G=(s=ur(t,C,S,h,x,Y,q))[0],B=s[1],w=s[2],P=(u=ur(t,C,E,h,k,X,q))[0],T=u[1],I=u[2]):(D=(l=lr(t,C,j,k,d,g,Y,q))[0],R=l[1],z=l[2],G=(c=lr(t,C,S,x,d,g,Y,q))[0],B=c[1],w=c[2],P=(p=lr(t,C,E,k,d,g,X,q))[0],T=p[1],I=p[2]);if(P||D||G||F){var H=At(f,"rotate("+z+"deg)","rotate("+R+"deg)"),L=function(t,e,r,n){return Kt(t,"rotate("+e+"deg)",$t(t),r,n)}(t,R,f.fixedPosition,f),V=Object(o.p)(Object(o.s)(O||[0,0],L),f.prevInverseDist||[0,0]);f.prevInverseDist=L;var U=lt(t,e,v({delta:D,dist:R,rotate:z,beforeDist:B,beforeDelta:G,beforeRotate:w,absoluteDist:T,absoluteDelta:P,absoluteRotate:I,isPinch:!!m},Zt(t,H,V,m,e)));return pt(t,"onRotate",U),U}}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isRotate&&(r.isRotate=!1,pt(t,"onRotateEnd",ct(t,e,{})),n)},dragGroupControlCondition:cr,dragGroupControlStart:function(t,e){var r=e.datas,n=t.state,a=n.left,i=n.top,s=n.beforeOrigin,u=this.dragControlStart(t,e);if(!u)return!1;u.set(r.beforeDirection*t.rotation);var l=Pt(t,this,"dragControlStart",e,(function(t,e){var r=t.state,n=r.left,u=r.top,l=r.beforeOrigin,c=Object(o.s)(Object(o.p)([n,u],[a,i]),Object(o.p)(l,s));return e.datas.groupClient=c,v(v({},e),{parentRotate:0})})),c=pt(t,"onRotateGroupStart",v(v({},u),{targets:t.props.targets,events:l}));return r.isRotate=!1!==c,!!r.isRotate&&u},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){var n=this.dragControl(t,e);if(n){var a=r.beforeDirection,i=n.beforeDist,s=n.beforeDelta/180*Math.PI,u=Pt(t,this,"dragControl",e,(function(t,e){var r=e.datas.groupClient,n=r[0],u=r[1],l=Object(o.t)([n,u],s*a),c=l[0],p=l[1],f=[c-n,p-u];return e.datas.groupClient=[c,p],v(v({},e),{parentRotate:i,groupDelta:f})}));t.rotation=a*n.beforeRotate;var l=v({targets:t.props.targets,events:u,set:function(e){t.rotation=e}},n);return pt(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isRotate)return this.dragControlEnd(t,e),Pt(t,this,"dragControlEnd",e),pt(t,"onRotateGroupEnd",ct(t,e,{targets:t.props.targets})),r},request:function(t){var e={},r=0,n=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:e}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-n),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},fr={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var r=t.props,n=r.resizable,a=r.edge;if(n)return a?ir(t,e):ar(t,e)},dragControlCondition:Et,dragControlStart:function(t,e){var r,n=e.inputEvent,a=e.isPinch,s=e.parentDirection,u=e.datas,l=e.parentFlag,c=s||(a?[0,0]:nt(n.target)),p=t.state,f=p.target,d=p.width,g=p.height;if(!c||!f)return!1;!a&&It(t,e),u.datas={},u.direction=c,u.startOffsetWidth=d,u.startOffsetHeight=g,u.prevWidth=0,u.prevHeight=0,r=function(t){var e=window.getComputedStyle(t);return[parseFloat(e.width),parseFloat(e.height)]}(f),u.startWidth=r[0],u.startHeight=r[1];var h=[Math.max(0,d-u.startWidth),Math.max(0,g-u.startHeight)];if(u.minSize=h,u.maxSize=[1/0,1/0],!l){var v=window.getComputedStyle(f);u.minSize=Object(o.s)([parseFloat(v.minWidth)||0,parseFloat(v.minHeight)||0],h),u.maxSize=Object(o.s)([parseFloat(v.maxWidth)||1/0,parseFloat(v.maxHeight)||1/0],h)}var b=t.props.transformOrigin||"% %";function m(t){u.ratio=t&&isFinite(t)?t:0}function O(e){u.fixedDirection=e,u.fixedPosition=te(t,e)}u.transformOrigin=b&&Object(i.r)(b)?b.split(" "):b,u.isWidth=!c[0]&&!c[1]||c[0]||!c[1],m(d/g),O([-c[0],-c[1]]);var x=lt(t,e,{direction:c,set:function(t){var e=t[0],r=t[1];u.startWidth=e,u.startHeight=r},setMin:function(t){u.minSize=t},setMax:function(t){u.maxSize=t},setRatio:m,setFixedDirection:O,setOrigin:function(t){u.transformOrigin=t},dragStart:er.dragStart(t,(new Gt).dragStart([0,0],e))});return!1!==pt(t,"onResizeStart",x)&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:c}),!!u.isResize&&x},dragControl:function(t,e){var r,n=e.datas,a=e.distX,o=e.distY,s=e.parentFlag,u=e.isPinch,l=e.parentDistance,c=e.parentScale,p=e.parentKeepRatio,f=e.dragClient,d=e.parentDist,g=e.isRequest,h=n.isResize,v=n.transformOrigin,m=n.fixedDirection,O=n.startWidth,x=n.startHeight,S=n.prevWidth,j=n.prevHeight,E=n.minSize,y=n.maxSize,C=n.ratio,D=n.isWidth;if(h){var R=t.props,z=R.throttleResize,G=void 0===z?0:z,B=R.parentMoveable,w=R.snapThreshold,P=void 0===w?5:w,T=n.direction,I=T,k=0,A=0;T[0]||T[1]||(I=[1,1]);var N=C&&(t.props.keepRatio||p),q=f,F=n.startOffsetWidth,Y=n.startOffsetHeight;if(f||(q=!s&&u?te(t,[0,0]):n.fixedPosition),d)k=d[0],A=d[1];else if(c)k=(c[0]-1)*F,A=(c[1]-1)*Y;else if(u)l&&(k=l,A=l*Y/F);else{var X=Ft({datas:n,distX:a,distY:o});if(k=I[0]*X[0],A=I[1]*X[1],N&&F&&Y){var W=Object(i.l)([0,0],X),H=Object(i.l)([0,0],I),L=Object(i.l)([0,0],[F,Y]),V=Z([k,A]),U=Math.cos(W-H)*V;I[0]?I[1]?(k=Math.cos(L)*U,A=Math.sin(L)*U):A=(k=U)*C:k=(A=U)/C}else if(!N){var _=b(T);F||(X[0]<0?_[0]=-1:X[0]>0&&(_[0]=1)),Y||(X[1]<0?_[1]=-1:X[1]>0&&(_[1]=1)),T=_,k=(I=_)[0]*X[0],A=I[1]*X[1]}}var K=I[0]||N?Math.max(F+k,M):F,$=I[1]||N?Math.max(Y+A,M):Y;N&&F&&Y&&(D?$=K/C:K=$*C);var J=[0,0];if(u||(J=function(t,e,r,n,a,i,o){if(!Ge(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return Ye(t,(function(t,i){return we(u,e+t,r+i,a,n,l)}),e,r,n,a,i,o)}(t,K,$,T,q,g,n)),d&&(!d[0]&&(J[0]=0),!d[1]&&(J[1]=0)),N){I[0]&&I[1]&&J[0]&&J[1]&&(Math.abs(J[0])>Math.abs(J[1])?J[1]=0:J[0]=0);var Q=!J[0]&&!J[1];Q&&(D?K=ot(K,G):$=ot($,G)),I[0]&&!I[1]||J[0]&&!J[1]||Q&&D?$=(K+=J[0])/C:(!I[0]&&I[1]||!J[0]&&J[1]||Q&&!D)&&(K=($+=J[1])*C)}else F+k<-P&&(J[0]=0),F+A<-P&&(J[1]=0),K+=J[0],$+=J[1],J[0]||(K=ot(K,G)),J[1]||($=ot($,G));K=(r=Object(i.e)([K,$],E,y,N))[0],$=r[1];var tt=[(k=(K=Math.round(K))-F)-S,(A=($=Math.round($))-Y)-j];n.prevWidth=k,n.prevHeight=A;var et=Qt(t,K,$,m,q,v);if(B||!tt.every((function(t){return!t}))||!et.every((function(t){return!t}))){var rt=lt(t,e,{width:O+k,height:x+A,offsetWidth:K,offsetHeight:$,direction:T,dist:[k,A],delta:tt,isPinch:!!u,drag:er.drag(t,zt(e,t.state,et,!!u,!1))});return pt(t,"onResize",rt),rt}}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,a=r.startOffsetWidth,i=r.startOffsetHeight,o=r.prevWidth,s=r.prevHeight;if(n){var u=t.state,l=u.width-(a+o),c=u.height-(i+s),p=Math.abs(l)>3,f=Math.abs(c)>3;return p&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),f&&(r.startHeight+=c,r.startOffsetHeight+=c,r.prevHeight+=c),p||f?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isResize&&(r.isResize=!1,pt(t,"onResizeEnd",ct(t,e,{})),n)},dragGroupControlCondition:Et,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var a=Bt(t,"resizable",e);function i(e,n){var a=r.fixedDirection,i=r.fixedPosition,s=te(e,a),u=Object(o.a)(Object(o.h)(-t.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),l=u[0],c=u[1];return n.datas.originalX=l,n.datas.originalY=c,n}var s=Pt(t,this,"dragControlStart",e,(function(t,e){return i(t,e)})),u=v(v({},n),{targets:t.props.targets,events:s,setFixedDirection:function(e){n.setFixedDirection(e),s.forEach((function(r,n){r.setFixedDirection(e),i(t.moveables[n],a[n])}))}}),l=pt(t,"onResizeGroupStart",u);return r.isResize=!1!==l,!!r.isResize&&n},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=this.dragControl(t,e);if(n){var a=n.offsetWidth,i=n.offsetHeight,s=n.dist,u=t.props.keepRatio,l=[a/(a-s[0]),i/(i-s[1])],c=r.fixedPosition,p=Pt(t,this,"dragControl",e,(function(e,r){var n=Object(o.a)(Object(o.h)(t.rotation/180*Math.PI,3),[r.datas.originalX*l[0],r.datas.originalY*l[1],1],3),a=n[0],i=n[1];return v(v({},r),{parentDist:null,parentScale:l,dragClient:Object(o.s)(c,[a,i]),parentKeepRatio:u})})),f=v({targets:t.props.targets,events:p},n);return pt(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isResize)return this.dragControlEnd(t,e),Pt(t,this,"dragControlEnd",e),pt(t,"onResizeGroupEnd",ct(t,e,{targets:t.props.targets})),r},request:function(t){var e={},r=0,n=0,a=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-a.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-a.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[r,n]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},dr={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var r=t.props,n=r.resizable,a=r.scalable,i=r.edge;if(!n&&a)return i?ir(t,e):ar(t,e)},dragControlCondition:Et,dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,a=e.inputEvent,i=e.parentDirection||(n?[0,0]:nt(a.target)),o=t.state,s=o.width,u=o.height,l=o.targetTransform,c=o.target;if(!i||!c)return!1;n||It(t,e),Vt(e),r.datas={},r.transform=l,r.prevDist=[1,1],r.direction=i,r.width=s,r.height=u,r.startValue=[1,1];var p=!i[0]&&!i[1]||i[0]||!i[1];function f(e){r.fixedDirection=e,r.fixedPosition=te(t,e)}r.isWidth=p,f([-i[0],-i[1]]);var d=lt(t,e,v(v({direction:i,set:function(t){r.startValue=t},setFixedDirection:f},Lt(e)),{dragStart:er.dragStart(t,(new Gt).dragStart([0,0],e))}));return!1!==pt(t,"onScaleStart",d)&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:i}),!!r.isScale&&d},dragControl:function(t,e){kt(e,"scale");var r=e.datas,n=e.distX,a=e.distY,s=e.parentScale,u=e.parentDistance,l=e.parentKeepRatio,c=e.parentFlag,p=e.isPinch,f=e.dragClient,d=e.parentDist,g=e.isRequest,h=r.prevDist,b=r.direction,m=r.width,O=r.height,x=r.isScale,S=r.startValue,j=r.isWidth,E=r.fixedDirection;if(!x)return!1;var M=t.props,C=M.throttleScale,D=M.parentMoveable,R=b;b[0]||b[1]||(R=[1,1]);var z=t.props.keepRatio||l,G=t.state,B=m*S[0],w=O*S[1],P=B/w,T=1,I=1,k=f;if(f||(k=!c&&p?te(t,[0,0]):r.fixedPosition),d)T=(m+d[0])/m,I=(O+d[1])/O;else if(s)T=s[0],I=s[1];else if(p)u&&(T=(m+u)/m,I=(O+u*O/m)/O);else{var A=Ft({datas:r,distX:n,distY:a}),N=R[0]*A[0],q=R[1]*A[1];if(z&&m&&O){var F=Object(i.l)([0,0],A),Y=Object(i.l)([0,0],R),X=Object(i.l)([0,0],[B,w]),W=Z([N,q]),H=Math.cos(F-Y)*W;R[0]?R[1]?(N=Math.cos(X)*H,q=Math.sin(X)*H):q=(N=H)/P:N=(q=H)*P}T=(m+N)/m,I=(O+q)/O}T=R[0]||z?T*S[0]:S[0],I=R[1]||z?I*S[1]:S[1],0===T&&(T=(h[0]>0?1:-1)*y),0===I&&(I=(h[1]>0?1:-1)*y);var L=[T/S[0],I/S[1]],V=[T,I];if(!p&&t.props.groupable){var U=(G.snapRenderInfo||{}).direction;Object(i.o)(U)&&(U[0]||U[1])&&(G.snapRenderInfo={direction:b,request:e.isRequest})}var _=[0,0];if(p||(_=We(t,L,b,g,r)),z){R[0]&&R[1]&&_[0]&&_[1]&&(Math.abs(_[0])>Math.abs(_[1])?_[1]=0:_[0]=0);var K=!_[0]&&!_[1];if(K&&(j?L[0]=ot(L[0]*S[0],C)/S[0]:L[1]=ot(L[1]*S[1],C)/S[1]),R[0]&&!R[1]||_[0]&&!_[1]||K&&j){L[0]+=_[0];var $=m*L[0]*S[0]/P;L[1]=$/O/S[1]}else if(!R[0]&&R[1]||!_[0]&&_[1]||K&&!j){L[1]+=_[1];var J=O*L[1]*S[1]*P;L[0]=J/m/S[0]}}else L[0]+=_[0],L[1]+=_[1],_[0]||(L[0]=ot(L[0]*S[0],C)/S[0]),_[1]||(L[1]=ot(L[1]*S[1],C)/S[1]);0===L[0]&&(L[0]=(h[0]>0?1:-1)*y),0===L[1]&&(L[1]=(h[1]>0?1:-1)*y);var Q,tt,et=[L[0]/h[0],L[1]/h[1]];tt=S,V=[(Q=L)[0]*tt[0],Q[1]*tt[1]];var rt=function(t,e,r,n,a){return Kt(t,"scale("+e.join(", ")+")",r,n,a)}(t,L,E,k,r),nt=Object(o.p)(rt,r.prevInverseDist||[0,0]);if(r.prevDist=L,r.prevInverseDist=rt,T===h[0]&&I===h[1]&&nt.every((function(t){return!t}))&&!D)return!1;var at=At(r,"scale("+V.join(", ")+")","scale("+L.join(", ")+")"),it=lt(t,e,v({offsetWidth:m,offsetHeight:O,direction:b,scale:V,dist:L,delta:et,isPinch:!!p},Zt(t,at,nt,p,e)));return pt(t,"onScale",it),it},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isScale&&(r.isScale=!1,pt(t,"onScaleEnd",ct(t,e,{})),n)},dragGroupControlCondition:Et,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var a=Bt(t,"resizable",e);function i(e,n){var a=r.fixedDirection,i=r.fixedPosition,s=te(e,a),u=Object(o.a)(Object(o.h)(-t.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),l=u[0],c=u[1];return n.datas.originalX=l,n.datas.originalY=c,n}r.moveableScale=t.scale;var s=Pt(t,this,"dragControlStart",e,(function(t,e){return i(t,e)})),u=v(v({},n),{targets:t.props.targets,events:s,setFixedDirection:function(e){n.setFixedDirection(e),s.forEach((function(r,n){r.setFixedDirection(e),i(t.moveables[n],a[n])}))}}),l=pt(t,"onScaleGroupStart",u);return r.isScale=!1!==l,!!r.isScale&&u},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){var n=this.dragControl(t,e);if(n){var a=r.moveableScale;t.scale=[n.scale[0]*a[0],n.scale[1]*a[1]];var i=t.props.keepRatio,s=n.dist,u=n.scale,l=r.fixedPosition,c=Pt(t,this,"dragControl",e,(function(e,r){var n=Object(o.a)(Object(o.h)(t.rotation/180*Math.PI,3),[r.datas.originalX*s[0],r.datas.originalY*s[1],1],3),a=n[0],c=n[1];return v(v({},r),{parentDist:null,parentScale:u,parentKeepRatio:i,dragClient:Object(o.s)(l,[a,c])})})),p=v({targets:t.props.targets,events:c},n);return pt(t,"onScaleGroup",p),p}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isScale)return this.dragControlEnd(t,e),Pt(t,this,"dragControlEnd",e),pt(t,"onScaleGroupEnd",ct(t,e,{targets:t.props.targets})),r},request:function(){var t={},e=0,r=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(n){return e+=n.deltaWidth,r+=n.deltaHeight,{datas:t,parentDist:[e,r]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function gr(t,e){return t.map((function(t,r){return Object(i.g)(t,e[r],1,2)}))}function hr(t,e,r){var n=Object(i.l)(t,e),a=Object(i.l)(t,r)-n;return a>=0?a:a+2*Math.PI}var vr={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var r=t.props,n=r.resizable,a=r.scalable,i=r.warpable,o=r.zoom;if(n||a||!i)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,p=s.pos4,f=gr(u,l),d=gr(l,u),g=gr(u,c),h=gr(c,u),v=gr(c,p),m=gr(p,c),O=gr(l,p),x=gr(p,l);return b([e.createElement("div",{className:w("line"),key:"middeLine1",style:$(f,v,o)}),e.createElement("div",{className:w("line"),key:"middeLine2",style:$(d,m,o)}),e.createElement("div",{className:w("line"),key:"middeLine3",style:$(g,O,o)}),e.createElement("div",{className:w("line"),key:"middeLine4",style:$(h,x,o)})],ar(t,e))},dragControlCondition:function(t){return!t.isRequest&&Object(i.n)(t.inputEvent.target,w("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,a=t.props.target,i=nt(n.target);if(!i||!a)return!1;var s=t.state,u=s.transformOrigin,l=s.is3d,c=s.targetTransform,p=s.targetMatrix,f=s.width,d=s.height,g=s.left,h=s.top;return r.datas={},r.targetTransform=c,r.warpTargetMatrix=l?p:Object(o.c)(p,3,4),r.targetInverseMatrix=Object(o.m)(Object(o.n)(r.warpTargetMatrix,4),3,4),r.direction=i,r.left=g,r.top=h,It(t,e),Vt(e),r.poses=[[0,0],[f,0],[0,d],[f,d]].map((function(t){return Object(o.p)(t,u)})),r.nextPoses=r.poses.map((function(t){var e=t[0],n=t[1];return Object(o.a)(r.warpTargetMatrix,[e,n,0,1],4)})),r.startValue=Object(o.f)(4),r.prevMatrix=Object(o.f)(4),r.absolutePoses=it(s),r.posIndexes=Yt(i),s.snapRenderInfo={request:e.isRequest,direction:i},!1!==pt(t,"onWarpStart",lt(t,e,v({set:function(t){r.startValue=t}},Lt(e))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,a=e.distX,i=e.distY,s=r.targetInverseMatrix,u=r.prevMatrix,l=r.isWarp,c=r.startValue,p=r.poses,f=r.posIndexes,d=r.absolutePoses;if(!l)return!1;if(kt(e,"matrix3d"),Ge(t,"warpable")){var g=f.map((function(t){return d[t]}));g.length>1&&g.push([(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2]);var h=ke(t,n,g.map((function(t){return[t[0]+a,t[1]+i]}))),v=h.horizontal,b=h.vertical;i-=v.offset,a-=b.offset}var m=Ft({datas:r,distX:a,distY:i},!0),O=r.nextPoses.slice();if(f.forEach((function(t){O[t]=Object(o.s)(O[t],m)})),!E.every((function(t){return function(t,e){var r=hr(t[0],t[1],t[2]),n=hr(e[0],e[1],e[2]),a=Math.PI;return!(r>=a&&n<=a||r<=a&&n>=a)}(t.map((function(t){return p[t]})),t.map((function(t){return O[t]})))})))return!1;var x=Object(o.j)(p[0],p[2],p[1],p[3],O[0],O[2],O[1],O[3]);if(!x.length)return!1;var S=Nt(r,Object(o.r)(s,x,4),!0),j=Object(o.r)(Object(o.n)(u,4),S,4);r.prevMatrix=S;var M=Object(o.r)(c,S,4),y=At(r,"matrix3d("+M.join(", ")+")","matrix3d("+S.join(", ")+")");return _t(e,y),pt(t,"onWarp",lt(t,e,{delta:j,matrix:M,dist:S,multiply:o.r,transform:y})),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,pt(t,"onWarpEnd",ct(t,e,{})),n)}},br=w("area-pieces"),mr=w("area-piece"),Or=w("avoid");function xr(t){var e=t.areaElement,r=t.state,n=r.width,a=r.height;Object(i.u)(e,Or),e.style.cssText+="left: 0px; top: 0px; width: "+n+"px; height: "+a+"px"}function Sr(t){return t.createElement("div",{key:"area_pieces",className:br},t.createElement("div",{className:mr}),t.createElement("div",{className:mr}),t.createElement("div",{className:mr}),t.createElement("div",{className:mr}))}var jr={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,s=r.groupable,u=r.passDragArea,l=t.state,c=l.width,p=l.height,f=l.renderPoses,d=u?w("area","pass"):w("area");if(s)return[e.createElement("div",{key:"area",ref:Object(a.c)(t,"areaElement"),className:d}),Sr(e)];if(!n||!i)return[];var g=Object(o.j)([0,0],[c,0],[0,p],[c,p],f[0],f[1],f[2],f[3]),h=g.length?Y(g,!0):"none";return[e.createElement("div",{key:"area",ref:Object(a.c)(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:c+"px",height:p+"px",transformOrigin:"0 0",transform:h}}),Sr(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,a=e.clientY;if(!e.inputEvent)return!1;r.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,l=s.renderPoses,c=s.rootMatrix,p=s.is3d,f=u.left,d=u.top,g=V(l),h=g.left,v=g.top,b=g.width,m=g.height,O=mt(c,[n-f,a-d],p?4:3),x=O[0],S=O[1],j=[{left:h,top:v,width:b,height:(S-=v)-10},{left:h,top:v,width:(x-=h)-10,height:m},{left:h,top:v+S+10,width:b,height:m-S-10},{left:h+x+10,top:v,width:b-x-10,height:m}],E=[].slice.call(o.nextElementSibling.children);j.forEach((function(t,e){E[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"})),Object(i.b)(o,Or)},drag:function(t,e){var r=e.datas;if(!e.inputEvent)return!1;r.isDragArea||(r.isDragArea=!0,xr(t))},dragEnd:function(t,e){var r=e.inputEvent,n=e.datas;if(!r)return!1;n.isDragArea||xr(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){xr(t)}},Er={name:"origin",props:{origin:Boolean},events:{},render:function(t,e){var r=t.props.zoom,n=t.state,a=n.beforeOrigin,i=n.rotation;return[e.createElement("div",{className:w("control","origin"),style:J(i,r,a),key:"beforeOrigin"})]}};function Mr(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var yr={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(t,e){var r=t.props.scrollContainer,n=void 0===r?t.getContainer():r,a=new c.a,i=yt(n,!0);e.datas.dragScroll=a;var o=e.isControl?"controlGesto":"targetGesto",s=e.targets;a.on("scroll",(function(r){var n=r.container,a=r.direction,i=lt(t,e,{scrollContainer:n,direction:a}),o=s?"onScrollGroup":"onScroll";s&&(i.targets=s),pt(t,o,i)})).on("move",(function(r){var n=r.offsetX,a=r.offsetY;t[o].scrollBy(n,a,e.inputEvent,!1)})),a.dragStart(e,{container:i})},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,a=n.scrollContainer,i=void 0===a?t.getContainer():a,o=n.scrollThreshold,s=void 0===o?0:o,u=n.getScrollPosition,l=void 0===u?Mr:u;return r.drag(e,{container:i,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,v(v({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,v(v({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,v(v({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,v(v({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,v(v({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,v(v({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,v(v({},e),{targets:t.props.targets}))}},Cr={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,props:Object},events:{}},Dr={name:"padding",props:{padding:Object},events:{},render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=r.padding||{},a=n.left,i=void 0===a?0:a,s=n.top,u=void 0===s?0:s,l=n.right,c=void 0===l?0:l,p=n.bottom,f=void 0===p?0:p,d=t.state,g=d.renderPoses,h=[d.pos1,d.pos2,d.pos3,d.pos4],v=[];return i>0&&v.push([0,2]),u>0&&v.push([0,1]),c>0&&v.push([1,3]),f>0&&v.push([2,3]),v.map((function(t,r){var n=t[0],a=t[1],i=h[n],s=h[a],u=g[n],l=g[a],c=Object(o.j)([0,0],[100,0],[0,100],[100,100],i,s,u,l);if(c.length)return e.createElement("div",{key:"padding"+r,className:w("padding"),style:{transform:Y(c,!0)}})}))}},Rr=["nw","ne","se","sw"];function zr(t,e){var r=t[0]+t[1],n=r>e?e/r:1;return t[0]*=n,t[1]=e-t[1]*n,t}var Gr=[1,2,5,6],Br=[0,3,4,7],wr=[1,-1,-1,1],Pr=[1,1,-1,-1];function Tr(t,e,r,n,a,i,o,s,u){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=n),void 0===u&&(u=a);var l=[],c=!1,p=t.map((function(t,p){var f=e[p],d=f.horizontal,g=f.vertical;if(g&&!c&&(c=!0,l.push("/")),c){var h=Math.max(0,1===g?t[1]-o:u-t[1]);return l.push(St(h,a,r)),h}h=Math.max(0,1===d?t[0]-i:s-t[0]);return l.push(St(h,n,r)),h}));return{styles:l,raws:p}}function Ir(t){for(var e=[0,0],r=[0,0],n=t.length,a=0;a<n;++a){var i=t[a];i.sub&&(i.horizontal&&(0===e[1]&&(e[0]=a),e[1]=a-e[0]+1,r[0]=a+1),i.vertical&&(0===r[1]&&(r[0]=a),r[1]=a-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function kr(t,e,r,n,a,o){var s,u,l,c;void 0===o&&(o=[0,0]);var p=t.indexOf("/"),f=(p>-1?t.slice(0,p):t).length,d=t.slice(0,f),g=t.slice(f+1),h=d[0],v=void 0===h?"0px":h,m=d[1],O=void 0===m?v:m,x=d[2],S=void 0===x?v:x,j=d[3],E=void 0===j?O:j,M=g[0],y=void 0===M?v:M,C=g[1],D=void 0===C?y:C,R=g[2],z=void 0===R?y:R,G=g[3],B=void 0===G?D:G,w=[v,O,S,E].map((function(t){return Object(i.f)(t,e)})),P=[y,D,z,B].map((function(t){return Object(i.f)(t,r)})),T=w.slice(),I=P.slice();s=zr([T[0],T[1]],e),T[0]=s[0],T[1]=s[1],u=zr([T[3],T[2]],e),T[3]=u[0],T[2]=u[1],l=zr([I[0],I[3]],r),I[0]=l[0],I[3]=l[1],c=zr([I[1],I[2]],r),I[1]=c[0],I[2]=c[1];var k=T.slice(0,Math.max(o[0],d.length)),A=I.slice(0,Math.max(o[1],g.length));return b(k.map((function(t,e){var i=Rr[e];return{horizontal:wr[e],vertical:0,pos:[n+t,a+(-1===Pr[e]?r:0)],sub:!0,raw:w[e],direction:i}})),A.map((function(t,r){var i=Rr[r];return{horizontal:0,vertical:Pr[r],pos:[n+(-1===wr[r]?e:0),a+t],sub:!0,raw:P[r],direction:i}})))}function Ar(t,e,r,n,a){void 0===a&&(a=e.length);var i=Ir(t.slice(n)),o=i.horizontalRange,s=i.verticalRange,u=r-n,l=0;if(0===u)l=a;else if(u>0&&u<o[1])l=o[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),e.splice(r,l)}function Nr(t,e,r,n,a,i,o,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var p=Ir(t.slice(r)),f=p.horizontalRange,d=p.verticalRange;if(n>-1)for(var g=1===wr[n]?i-l:s-i,h=f[1];h<=n;++h){var v=1===Pr[h]?c:u,b=0;if(n===h?b=i:0===h?b=l+g:-1===wr[h]&&(b=s-(e[r][0]-l)),t.splice(r+h,0,{horizontal:wr[h],vertical:0,pos:[b,v]}),e.splice(r+h,0,[b,v]),0===h)break}else if(a>-1){var m=1===Pr[a]?o-c:u-o;if(0===f[1]&&0===d[1]){var O=[l+m,c];t.push({horizontal:wr[0],vertical:0,pos:O}),e.push(O)}var x=d[0];for(h=d[1];h<=a;++h){b=1===wr[h]?l:s,v=0;if(a===h?v=o:0===h?v=c+m:1===Pr[h]?v=e[r+x][1]:-1===Pr[h]&&(v=u-(e[r+x][1]-c)),t.push({horizontal:0,vertical:Pr[h],pos:[b,v]}),e.push([b,v]),0===h)break}}}function qr(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,r){return t.horizontal?e[r]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,r){return t.vertical?e[r]:null})).filter((function(t){return null!=t}))}}var Fr=[[0,-1,"n"],[1,0,"e"]],Yr=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Xr(t,e,r){var n=t.props.clipRelative,a=t.state,i=a.width,s=a.height,u=e,l=u.type,c=u.poses,p="rect"===l,f="circle"===l;if("polygon"===l)return r.map((function(t){return St(t[0],i,n)+" "+St(t[1],s,n)}));if(p||"inset"===l){var d=r[1][1],g=r[3][0],h=r[7][0],v=r[5][1];if(p)return[d,g,v,h].map((function(t){return t+"px"}));var m=[d,i-g,s-v,h].map((function(t,e){return St(t,e%2?i:s,n)}));if(r.length>8){var O=Object(o.p)(r[4],r[0]),x=O[0],S=O[1];m.push.apply(m,b(["round"],Tr(r.slice(8),c.slice(8),n,x,S,h,d,g,v).styles))}return m}if(f||"ellipse"===l){var j=r[0],E=St(Math.abs(r[1][1]-j[1]),f?Math.sqrt((i*i+s*s)/2):s,n);return(m=f?[E]:[St(Math.abs(r[2][0]-j[0]),i,n),E]).push("at",St(j[0],i,n),St(j[1],s,n)),m}}function Wr(t,e,r,n){var a=[n,(n+e)/2,e],i=[t,(t+r)/2,r];return Yr.map((function(t){var e=t[0],r=t[1],n=t[2],o=a[e+1],s=i[r+1];return{vertical:Math.abs(r),horizontal:Math.abs(e),direction:n,pos:[o,s]}}))}function Hr(t,e,r,n,a){var o,s,u,l,c,p,f,d=a;if(!d){var g=getComputedStyle(t),h=g.clipPath;d="none"!==h?h:g.clip}if(d&&"none"!==d&&"auto"!==d||(d=n)){var v=Object(i.w)(d),m=v.prefix,O=void 0===m?d:m,x=v.value,S=void 0===x?"":x,j="circle"===O,E=" ";if("polygon"===O)return E=",",{type:O,clipText:d,poses:P=(R=Object(i.x)(S||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var n=t.split(" "),a=n[0],o=n[1];return{vertical:1,horizontal:1,pos:[Object(i.f)(a,e),Object(i.f)(o,r)]}})),splitter:E};if(j||"ellipse"===O){var M="",y="",C=0,D=0,R=Object(i.y)(S);if(j){var z;z=void 0===(o=R[0])?"50%":o,M=void 0===(s=R[2])?"50%":s,y=void 0===(u=R[3])?"50%":u,C=Object(i.f)(z,Math.sqrt((e*e+r*r)/2)),D=C}else{var G,B;G=void 0===(l=R[0])?"50%":l,B=void 0===(c=R[1])?"50%":c,M=void 0===(p=R[3])?"50%":p,y=void 0===(f=R[4])?"50%":f,C=Object(i.f)(G,e),D=Object(i.f)(B,r)}var w=[Object(i.f)(M,e),Object(i.f)(y,r)],P=b([{vertical:1,horizontal:1,pos:w,direction:"nesw"}],Fr.slice(0,j?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[w[0]+t[0]*C,w[1]+t[1]*D]}})));return{type:O,clipText:d,radiusX:C,radiusY:D,left:w[0]-C,top:w[1]-D,poses:P,splitter:E}}if("inset"===O){var T=(R=Object(i.y)(S||"0 0 0 0")).indexOf("round"),I=(T>-1?R.slice(0,T):R).length,k=R.slice(I+1),A=R.slice(0,I),N=A[0],q=A[1],F=void 0===q?N:q,Y=A[2],X=void 0===Y?N:Y,W=A[3],H=void 0===W?F:W,L=[N,X].map((function(t){return Object(i.f)(t,r)})),V=L[0],U=L[1],_=[H,F].map((function(t){return Object(i.f)(t,e)})),Z=_[0],K=_[1],$=e-K,J=r-U,Q=kr(k,$-Z,J-V,Z,V);return{type:"inset",clipText:d,poses:P=b(Wr(V,$,J,Z),Q),top:V,left:Z,right:$,bottom:J,radius:k,splitter:E}}if("rect"===O){E=",";var tt=(R=Object(i.x)(S||"0px, "+e+"px, "+r+"px, 0px")).map((function(t){return Object(i.z)(t).value}));return{type:"rect",clipText:d,poses:P=Wr(V=tt[0],K=tt[1],U=tt[2],Z=tt[3]),top:V,right:K,bottom:U,left:Z,values:R,splitter:E}}}}var Lr={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var r=t.props,n=r.customClipPath,a=r.defaultClipPath,s=r.clipArea,u=r.zoom,l=t.state,c=l.target,p=l.width,f=l.height,d=l.allMatrix,g=l.is3d,h=l.left,v=l.top,m=l.pos1,O=l.pos2,x=l.pos3,S=l.pos4,j=l.clipPathState,E=l.snapBoundInfos;if(!c)return[];var M=Hr(c,p,f,a||"inset",j||n);if(!M)return[];var y=g?4:3,C=M.type,D=M.poses.map((function(t){var e=H(d,t.pos,y);return[e[0]-h,e[1]-v]})),R=[],z=[],G="rect"===C,B="inset"===C,P="polygon"===C;if(G||B||P){var T=B?D.slice(0,8):D;z=T.map((function(t,r){var n=0===r?T[T.length-1]:T[r-1],a=Object(i.l)(n,t),o=K(n,t);return e.createElement("div",{key:"clipLine"+r,className:w("line","clip-line","snap-control"),"data-clip-index":r,style:{width:o+"px",transform:"translate("+n[0]+"px, "+n[1]+"px) rotate("+a+"rad) scaleY("+u+")"}})}))}if(R=D.map((function(t,r){return e.createElement("div",{key:"clipControl"+r,className:w("control","clip-control","snap-control"),"data-clip-index":r,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})})),B&&R.push.apply(R,D.slice(8).map((function(t,r){return e.createElement("div",{key:"clipRadiusControl"+r,className:w("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+r,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})}))),"circle"===C||"ellipse"===C){var I=M.left,k=M.top,A=M.radiusX,N=M.radiusY,q=Object(o.p)(H(d,[I,k],y),H(d,[0,0],y)),F=q[0],X=q[1],W="none";if(!s){for(var L=Math.max(10,A/5,N/5),U=[],_=0;_<=L;++_){var Z=2*Math.PI/L*_;U.push([A+(A-u)*Math.cos(Z),N+(N-u)*Math.sin(Z)])}U.push([A,-2]),U.push([-2,-2]),U.push([-2,2*N+2]),U.push([2*A+2,2*N+2]),U.push([2*A+2,-2]),U.push([A,-2]),W="polygon("+U.map((function(t){return t[0]+"px "+t[1]+"px"})).join(", ")+")"}R.push(e.createElement("div",{key:"clipEllipse",className:w("clip-ellipse","snap-control"),style:{width:2*A+"px",height:2*N+"px",clipPath:W,transform:"translate("+(-h+F)+"px, "+(-v+X)+"px) "+Y(d)}}))}if(s){var $=V(b([m,O,x,S],D)),J=$.width,Q=$.height,tt=$.left,et=$.top;if(P||G||B){U=B?D.slice(0,8):D;R.push(e.createElement("div",{key:"clipArea",className:w("clip-area","snap-control"),style:{width:J+"px",height:Q+"px",transform:"translate("+tt+"px, "+et+"px)",clipPath:"polygon("+U.map((function(t){return t[0]-tt+"px "+(t[1]-et)+"px"})).join(", ")+")"}}))}}return E&&["vertical","horizontal"].forEach((function(t){var r=E[t],n="horizontal"===t;r.isSnap&&z.push.apply(z,r.snap.posInfos.map((function(r,a){var i=r.pos,s=Object(o.p)(H(d,n?[0,i]:[i,0],y),[h,v]),l=Object(o.p)(H(d,n?[p,i]:[i,f],y),[h,v]);return nr(e,"",s,l,u,"clip"+t+"snap"+a,"guideline")}))),r.isBound&&z.push.apply(z,r.bounds.map((function(r,a){var i=r.pos,s=Object(o.p)(H(d,n?[0,i]:[i,0],y),[h,v]),l=Object(o.p)(H(d,n?[p,i]:[i,f],y),[h,v]);return nr(e,"",s,l,u,"clip"+t+"bounds"+a,"guideline","bounds","bold")})))})),b(R,z)},dragControlCondition:function(t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props.dragWithClip;return!(void 0===r||r)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,e)},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,n=t.props,a=n.defaultClipPath,i=n.customClipPath,o=r.target,s=r.width,u=r.height,l=e.inputEvent?e.inputEvent.target:null,c=l?l.getAttribute("class"):"",p=e.datas,f=Hr(o,s,u,a||"inset",i);if(!f)return!1;var d=f.clipText;return!1===pt(t,"onClipStart",lt(t,e,{clipType:f.type,clipStyle:d,poses:f.poses.map((function(t){return t.pos}))}))?(p.isClipStart=!1,!1):(p.isControl=c.indexOf("clip-control")>-1,p.isLine=c.indexOf("clip-line")>-1,p.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,p.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,p.clipPath=f,p.isClipStart=!0,r.clipPathState=d,It(t,e),!0)},dragControl:function(t,e){var r=e.datas,n=e.originalDatas;if(!r.isClipStart)return!1;var a=n&&n.draggable||{},s=r,u=s.isControl,l=s.isLine,c=s.isArea,p=s.index,f=s.clipPath;if(!f)return!1;var d=a.isDrag?a.prevDist:Ft(e),g=d[0],h=d[1],v=t.props,m=t.state,O=m.width,x=m.height,S=!c&&!u&&!l,j=f.type,E=f.poses,M=f.splitter,y=E.map((function(t){return t.pos}));S&&(g=-g,h=-h);var C=!u||"nesw"===E[p].direction,D="inset"===j||"rect"===j,R=E.map((function(){return[0,0]}));if(u&&!C){var z=E[p],G=z.horizontal,B=z.vertical,w=[g*Math.abs(G),h*Math.abs(B)];R=function(t,e,r,n){var a=t[e],i=a.direction,o=a.sub,s=t.map((function(){return[0,0]})),u=i?i.split(""):[];if(n&&e<8){var l=u.filter((function(t){return"w"===t||"e"===t}))[0],c=u.filter((function(t){return"n"===t||"s"===t}))[0];s[e]=r,t.forEach((function(t,e){var n=t.direction;n&&(n.indexOf(l)>-1&&(s[e][0]=r[0]),n.indexOf(c)>-1&&(s[e][1]=r[1]))})),l&&(s[1][0]=r[0]/2,s[5][0]=r[0]/2),c&&(s[3][1]=r[1]/2,s[7][1]=r[1]/2)}else i&&!o?u.forEach((function(e){var n="n"===e||"s"===e;t.forEach((function(t,a){var i=t.direction,o=t.horizontal,u=t.vertical;i&&-1!==i.indexOf(e)&&(s[a]=[n||!o?0:r[0],n&&u?r[1]:0])}))})):s[e]=r;return s}(E,p,w,D)}else C&&(R=y.map((function(){return[g,h]})));var P=y.map((function(t,e){return Object(o.s)(t,R[e])})),T=b(P);m.snapBoundInfos=null;var I="circle"===f.type,k="ellipse"===f.type;if(I||k){var A=V(P),N=Math.abs(A.bottom-A.top),q=Math.abs(k?A.right-A.left:N),F=P[0][1]+N,Y=P[0][0]-q,X=P[0][0]+q;I&&(T.push([X,A.bottom]),R.push([1,0])),T.push([A.left,F]),R.push([0,1]),T.push([Y,A.bottom]),R.push([1,0])}var W=ne([],O,x,(v.clipHorizontalGuidelines||[]).map((function(t){return Object(i.f)(""+t,x)})),(v.clipVerticalGuidelines||[]).map((function(t){return Object(i.f)(""+t,O)}))),H=[],L=[];if(I||k)H=[T[4][0],T[2][0]],L=[T[1][1],T[3][1]];else if(D){var U=[T[0],T[2],T[4],T[6]],_=[R[0],R[2],R[4],R[6]];H=U.filter((function(t,e){return _[e][0]})).map((function(t){return t[0]})),L=U.filter((function(t,e){return _[e][1]})).map((function(t){return t[1]}))}else H=T.filter((function(t,e){return R[e][0]})).map((function(t){return t[0]})),L=T.filter((function(t,e){return R[e][1]})).map((function(t){return t[1]}));for(var Z=function(t){var e=Ae(W,v.clipTargetBounds&&{left:0,top:0,right:O,bottom:x},H,L,{snapThreshold:5}),r=e.horizontal,n=e.vertical,a=r.offset,i=n.offset;if(!k&&!I||0!==R[0][0]||0!==R[0][1])return T.forEach((function(t,e){var r=R[e];r[0]&&(t[0]-=i),r[1]&&(t[1]-=a)})),"break";var o=V(P),s=o.bottom-o.top,u=k?o.right-o.left:s;u-=n.isBound?Math.abs(i):0===n.snapIndex?-i:i,s-=r.isBound?Math.abs(a):0===r.snapIndex?-a:a,I&&(u=s=fe(n,r)>0?s:u);var l=T[0];T[1][1]=l[1]-s,T[2][0]=l[0]+u,T[3][1]=l[1]+s,T[4][0]=l[0]-u},K=0;K<2;++K){if("break"===Z())break}var $=Xr(t,f,P),J=j+"("+$.join(M)+")";if(m.clipPathState=J,I||k)H=[T[4][0],T[2][0]],L=[T[1][1],T[3][1]];else if(D){U=[T[0],T[2],T[4],T[6]];H=U.map((function(t){return t[0]})),L=U.map((function(t){return t[1]}))}else H=T.map((function(t){return t[0]})),L=T.map((function(t){return t[1]}));return m.snapBoundInfos=Ae(W,v.clipTargetBounds&&{left:0,top:0,right:O,bottom:x},H,L,{snapThreshold:1}),pt(t,"onClip",lt(t,e,{clipEventType:"changed",clipType:j,poses:P,clipStyle:J,clipStyles:$,distX:g,distY:h})),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,n=e.datas,a=e.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return!!o&&(pt(t,"onClipEnd",ct(t,e,{})),a&&(s?function(t,e){var r=e.datas,n=r.clipPath,a=r.index,i=n,o=i.type,s=i.poses,u=i.splitter,l=s.map((function(t){return t.pos})),c=l.length;if("polygon"===o)s.splice(a,1),l.splice(a,1);else{if("inset"!==o)return;if(a<8)return;if(Ar(s,l,a,8,c),c===s.length)return}var p=Xr(t,n,l);pt(t,"onClip",lt(t,e,{clipEventType:"removed",clipType:o,poses:l,clipStyles:p,clipStyle:o+"("+p.join(u)+")",distX:0,distY:0}))}(t,e):i&&function(t,e){var r=Tt(t,e),n=r[0],a=r[1],i=e.datas,o=i.clipPath,s=i.index,u=o,l=u.type,c=u.poses,p=u.splitter,f=c.map((function(t){return t.pos}));if("polygon"===l)f.splice(s,0,[n,a]);else{if("inset"!==l)return;var d=Gr.indexOf(s),g=Br.indexOf(s),h=c.length;if(Nr(c,f,8,d,g,n,a,f[4][0],f[4][1],f[0][0],f[0][1]),h===c.length)return}var v=Xr(t,o,f);pt(t,"onClip",lt(t,e,{clipEventType:"added",clipType:l,poses:f,clipStyles:v,clipStyle:l+"("+v.join(p)+")",distX:0,distY:0}))}(t,e)),a||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Vr={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:Object(i.n)(t.inputEvent.target,w("origin"))},dragControlStart:function(t,e){var r=e.datas;It(t,e);var n=lt(t,e,{dragStart:er.dragStart(t,(new Gt).dragStart([0,0],e))}),a=pt(t,"onDragOriginStart",n);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,!1===a?(r.isDragOrigin=!1,!1):n},dragControl:function(t,e){var r=e.datas,n=e.isPinch,a=e.isRequest;if(!r.isDragOrigin)return!1;var i=Ft(e),s=i[0],u=i[1],l=t.state,c=l.width,p=l.height,f=l.offsetMatrix,d=l.targetMatrix,g=l.is3d,h=t.props.originRelative,v=void 0===h||h,b=g?4:3,m=[s,u];if(a){var O=e.distOrigin;(O[0]||O[1])&&(m=O)}var x=Object(o.s)(r.startOrigin,m),S=Object(o.s)(r.startTargetOrigin,m),j=Object(o.p)(m,r.prevOrigin),E=Ht(f,d,x,b),M=t.getRect(),y=V(L(E,c,p,b)),C=[M.left-y.left,M.top-y.top];r.prevOrigin=m;var D=lt(t,e,{width:c,height:p,origin:x,dist:m,delta:j,transformOrigin:[St(S[0],c,v),St(S[1],p,v)].join(" "),drag:er.drag(t,zt(e,t.state,C,!!n,!1))});return pt(t,"onDragOrigin",D),D},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(pt(t,"onDragOriginEnd",ct(t,e,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var e={},r=t.getRect(),n=0,a=0,i=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(o[0]+=t.deltaOrigin[0],o[1]+=t.deltaOrigin[1]):"origin"in t?(o[0]=t.origin[0]-i[0],o[1]=t.origin[1]-i[1]):("x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?a=t.y-r.top:"deltaY"in t&&(a+=t.deltaY)),{datas:e,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Ur(t,e,r,n,a){var o;void 0===n&&(n=[0,0]);if(a)o=a;else{var s=window.getComputedStyle(t);o=s&&s.borderRadius||""}return kr(!o||!a&&"0px"===o?[]:Object(i.y)(o),e,r,0,0,n)}function _r(t,e,r,n,a,i){var o=t.state,s=o.width,u=o.height,l=Tr(i,a,t.props.roundRelative,s,u),c=l.raws,p=l.styles,f=qr(a,c),d=f.horizontals,g=f.verticals,h=p.join(" ");o.borderRadiusState=h,pt(t,"onRound",lt(t,e,{horizontals:d,verticals:g,borderRadius:h,width:s,height:u,delta:n,dist:r}))}var Zr={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,e){var r=t.state,n=r.target,a=r.width,i=r.height,s=r.allMatrix,u=r.is3d,l=r.left,c=r.top,p=r.borderRadiusState,f=t.props,d=f.minRoundControls,g=void 0===d?[0,0]:d,h=f.maxRoundControls,v=void 0===h?[4,4]:h,b=f.zoom;if(!n)return null;var m=u?4:3,O=Ur(n,a,i,g,p);if(!O)return null;var x=0,S=0;return O.map((function(t,r){S+=Math.abs(t.horizontal),x+=Math.abs(t.vertical);var n=Object(o.p)(H(s,t.pos,m),[l,c]),a=t.vertical?x<=v[1]:S<=v[0];return e.createElement("div",{key:"borderRadiusControl"+r,className:w("control","border-radius"),"data-radius-index":r,style:{display:a?"block":"none",transform:"translate("+n[0]+"px, "+n[1]+"px) scale("+b+")"}})}))},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var e=t.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var r=e.inputEvent,n=e.datas,a=r.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=o?parseInt(a.getAttribute("data-radius-index"),10):-1,l=s?parseInt(a.getAttribute("data-line-index"),10):-1;if(!o&&!s)return!1;if(!1===pt(t,"onRoundStart",lt(t,e,{})))return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=o,n.isLine=s,It(t,e);var c=t.props,p=c.roundRelative,f=c.minRoundControls,d=void 0===f?[0,0]:f,g=t.state,h=g.target,v=g.width,b=g.height;n.isRound=!0,n.prevDist=[0,0];var m=Ur(h,v,b,d)||[];return n.controlPoses=m,g.borderRadiusState=Tr(m.map((function(t){return t.pos})),m,p,v,b).styles.join(" "),!0},dragControl:function(t,e){var r=e.datas;if(!r.isRound||!r.isControl||!r.controlPoses.length)return!1;var n=r.controlIndex,a=r.controlPoses,i=Ft(e),s=i[0],u=i[1],l=[s,u],c=Object(o.p)(l,r.prevDist),p=t.props.maxRoundControls,f=void 0===p?[4,4]:p,d=t.state,g=d.width,h=d.height,v=a[n],b=v.vertical,m=v.horizontal,O=a.map((function(t,e){var r=t.horizontal,n=t.vertical,a=[r*m*l[0],n*b*l[1]];if(r){if(1===f[0])return a;if(f[0]<4&&r!==m)return a}else{if(0===f[1])return a[1]=n*m*l[0]/g*h,a;if(b){if(1===f[1])return a;if(f[1]<4&&n!==b)return a}}return[0,0]}));O[n]=l;var x=a.map((function(t,e){return Object(o.s)(t.pos,O[e])}));return r.prevDist=[s,u],_r(t,e,l,c,a,x),!0},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var n=e.datas,a=e.isDouble;if(!n.isRound)return!1;var i=r.width,o=r.height,s=n.isControl,u=n.controlIndex,l=n.isLine,c=n.lineIndex,p=n.controlPoses,f=p.map((function(t){return t.pos})),d=f.length,g=t.props.roundClickable;if(a&&(void 0===g||g)){if(s)Ar(p,f,u,0);else if(l){var h=Tt(t,e);!function(t,e,r,n,a,i,o){var s=qr(t),u=s.horizontals,l=s.verticals,c=u.length,p=l.length,f=-1,d=-1;0===r?0===c?f=0:1===c&&(f=1):3===r&&(c<=2?f=2:c<=3&&(f=3)),2===r?0===p?d=0:p<4&&(d=3):1===r&&(p<=1?d=1:p<=2&&(d=2)),Nr(t,e,0,f,d,n,a,i,o)}(p,f,c,h[0],h[1],i,o)}d!==p.length&&_r(t,e,[0,0],[0,0],p,f),pt(t,"onRoundEnd",ct(t,e,{}))}return r.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},Kr={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,e){var r=t.state,n=r.is3d,a=r.targetMatrix,i=n?"matrix3d("+a.join(",")+")":"matrix("+Object(o.d)(a,!0)+")";e.datas.startTransforms=[i]},resetTransform:function(t,e){e.datas.nextTransforms=e.datas.startTransforms,e.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return lt(t,e,{setTransform:function(t){e.datas.startTransforms=Object(i.o)(t)?t:Object(i.y)(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return lt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),pt(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(t,e),pt(t,"onBeforeRender",lt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){pt(t,"onBeforeRenderEnd",lt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=Bt(t,"beforeRenderable",e),a=t.moveables,i=n.map((function(t,e){var n=a[e];return r.setTransform(n,t),r.fillDragStartParams(n,t)}));pt(t,"onBeforeRenderGroupStart",lt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=Bt(t,"beforeRenderable",e),a=t.moveables,i=n.map((function(t,e){var n=a[e];return r.resetTransform(n,t),r.fillDragParams(n,t)}));pt(t,"onBeforeRenderGroup",lt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),pt(t,"onBeforeRenderGroupEnd",lt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},$r={name:"Renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,e){pt(t,"onRenderStart",lt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){pt(t,"onRender",lt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){pt(t,"onRenderEnd",lt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){pt(t,"onRenderGroupStart",lt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){pt(t,"onRenderGroup",lt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,e){pt(t,"onRenderGroupEnd",lt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}};function Jr(t,e,r,n,a,i,o){var s="Start"===a,u=t.state.target,l=i.isRequest;if(!u||s&&n.indexOf("Control")>-1&&!l&&t.areaElement===i.inputEvent.target)return!1;var c=""+r+n+a,p=""+r+n+"Condition",f="End"===a,d=a.indexOf("After")>-1,g=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());g&&t.updateRect(a,!0,!1),""!==a||d||Ot(t.state,i);var h=n.indexOf("Group")>-1,m=b([Kr],t[e].slice(),[$r]);if(l){var O=i.requestAble;m.some((function(t){return t.name===O}))||m.push.apply(m,t.props.ables.filter((function(t){return t.name===O})))}if(!m.length)return!1;var x=m.filter((function(t){return t[c]})),S=i.datas;g&&x.forEach((function(e){e.unset&&e.unset(t)}));var j,E=i.inputEvent;f&&E&&(j=document.elementFromPoint(i.clientX,i.clientY)||E.target);var M=x.filter((function(e){var r=e.name,n=S[r]||(S[r]={});return s&&(n.isEventStart=!e[p]||e[p](i,t)),!!n.isEventStart&&e[c](t,v(v({},i),{datas:n,originalDatas:S,inputTarget:j}))})),y=M.length,C=s&&x.length&&!y;return(f||C)&&(t.state.gesto=null,t.moveables&&t.moveables.forEach((function(t){t.state.gesto=null}))),g&&C&&x.forEach((function(e){e.unset&&e.unset(t)})),!t.isUnmounted&&!C&&((!s&&y&&!o||f)&&(M.some((function(t){return t.updateRect}))&&!h?t.updateRect(a,!1,!1):t.updateRect(a,!0,!1),t.forceUpdate()),s||f||d||!y||o||Jr(t,e,r,n,a+"After",i),!0)}function Qr(t,e,r){var n=t.controlBox.getElement(),a=[];a.push(n),t.props.dragArea&&!t.props.dragTarget||a.push(e);var o=function(e){var r=e.inputEvent.target;return r===t.areaElement||!t.isMoveableElement(r)||Object(i.n)(r,"moveable-area")||Object(i.n)(r,"moveable-padding")};return tn(t,a,"targetAbles",r,{dragStart:o,pinchStart:o})}function tn(t,e,r,n,a){void 0===a&&(a={});var i=t.props,o=i.pinchOutside,s=i.pinchThreshold,u={container:window,pinchThreshold:s,pinchOutside:o},l=new f.a(e,u);return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(i){l.on(""+e+i,(function(o){var s=o.eventType;!a[s]||a[s](o)?Jr(t,r,e,n,i,o)||o.stop():o.stop()}))}))})),l}var en=function(){function t(t,e,r){var n=this;this.target=t,this.moveable=e,this.eventName=r,this.ables=[],this.onEvent=function(t){var e=n.eventName,r=n.moveable;n.ables.forEach((function(n){n[e]({inputEvent:t},r)}))},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),rn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=v({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]]},et(null)),e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e}h(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=this.state,r=t.edge,n=t.parentPosition,i=t.className,o=t.target,s=t.zoom,u=t.cspNonce,l=t.translateZ,c=t.cssStyled,f=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var d=n||{left:0,top:0},g=d.left,h=d.top,b=e.left,m=e.top,O=e.target,x=e.direction,S=e.renderPoses,j=t.targets,E=(j&&j.length||o)&&O,M=this.isDragging(),y={},C={createElement:p.createElement};return this.getEnabledAbles().forEach((function(t){y["data-able-"+t.name.toLowerCase()]=!0})),Object(p.createElement)(c,v({cspNonce:u,ref:Object(a.c)(this,"controlBox"),className:w("control-box",-1===x?"reverse":"",M?"dragging":"")+" "+i},y,{portalContainer:f,style:{position:"absolute",display:E?"block":"none",transform:"translate("+(b-g)+"px, "+(m-h)+"px) translateZ("+l+"px)","--zoom":s,"--zoompx":s+"px"}}),this.renderAbles(),nr(C,r?"n":"",S[0],S[1],s,0),nr(C,r?"e":"",S[1],S[3],s,1),nr(C,r?"w":"",S[0],S[2],s,2),nr(C,r?"s":"",S[2],S[3],s,3))},r.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,r=t.container,n=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),r||e||n||this.updateRect("",!1,!0),this.updateCheckInput()},r.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},r.componentWillUnmount=function(){this.isUnmounted=!0,ut(this,"targetGesto"),ut(this,"controlGesto");var t=this.events;for(var e in t){var r=t[e];r&&r.destroy()}},r.getContainer=function(){var t=this.props,e=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(S)>-1},r.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},r.hitTest=function(t){var e,r=this.state,n=r.target,a=r.pos1,i=r.pos2,o=r.pos3,s=r.pos4,l=r.targetClientRect;if(!n)return 0;if(t instanceof Element){var c=t.getBoundingClientRect();e={left:c.left,top:c.top,width:c.width,height:c.height}}else e=v({width:0,height:0},t);var p=e.left,f=e.top,d=e.width,g=e.height,h=Object(u.a)([a,i,s,o],l),b=Object(u.d)(h,[[p,f],[p+d,f],[p+d,f+g],[p,f+g]]),m=Object(u.b)(h);return b&&m?Math.min(100,b/m*100):0},r.isInside=function(t,e){var r=this.state,n=r.target,a=r.pos1,i=r.pos2,o=r.pos3,s=r.pos4,l=r.targetClientRect;return!!n&&Object(u.e)([t,e],Object(u.a)([a,i,s,o],l))},r.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props,a=n.parentMoveable,i=this.state.target||this.props.target,o=this.getContainer(),s=a?a.props.rootContainer:n.rootContainer;this.updateState(et(this.controlBox&&this.controlBox.getElement(),i,o,o,s||o),!a&&r)},r.isTargetChanged=function(t,e){var r=this.props,n=r.dragTarget||r.target,a=t.dragTarget||t.target,i=r.dragArea,o=t.dragArea;return!i&&a!==n||(e||i)&&o!==i},r.updateNativeEvents=function(t){var e=this,r=this.props.dragArea?this.areaElement:this.state.target,n=this.events,a=Object(i.k)(n);if(this.isTargetChanged(t))for(var o in n){var s=n[o];s&&s.destroy(),n[o]=null}if(r){var u=this.enabledAbles;a.forEach((function(t){var a=dt(u,[t]),i=a.length>0,o=n[t];i?(o||(o=new en(r,e,t),n[t]=o),o.setAbles(a)):o&&(o.destroy(),n[t]=null)}))}},r.updateEvent=function(t){var e=this.controlBox.getElement(),r=this.targetAbles.length,n=this.controlAbles.length,a=this.props,i=a.dragTarget||a.target,o=this.isTargetChanged(t,!0),s=!r&&this.targetGesto||o;s&&(ut(this,"targetGesto"),this.updateState({gesto:null})),n||ut(this,"controlGesto"),i&&r&&!this.targetGesto&&(this.targetGesto=Qr(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=tn(this,e,"controlAbles","Control")),s&&this.unsetAbles()},r.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,e=it(this.state),r=e[0],n=e[1],a=e[2],i=e[3],s=V(e),u=t.width,l=t.height,c=s.width,p=s.height,f=s.left,d=s.top,g=[t.left,t.top],h=Object(o.s)(g,t.origin);return{width:c,height:p,left:f,top:d,pos1:r,pos2:n,pos3:a,pos4:i,offsetWidth:u,offsetHeight:l,beforeOrigin:Object(o.s)(g,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},r.getManager=function(){return this},r.getRotation=function(){var t=this.state;return function(t,e,r){var n=Object(i.l)(t,e)/Math.PI*180;return(n=r>=0?n:180-n)>=0?n:360+n}(t.pos1,t.pos2,t.direction)},r.request=function(t,e,r){void 0===e&&(e={});var n=this.props,a=n.ables,i=n.groupable,o=a.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=o.request(this),l=r||e.isInstant,c=u.isControl?"controlAbles":"targetAbles",p=(i?"Group":"")+(u.isControl?"Control":""),f={request:function(e){return Jr(s,c,"drag",p,"",v(v({},u.request(e)),{requestAble:t,isRequest:!0}),l),this},requestEnd:function(){return Jr(s,c,"drag",p,"End",v(v({},u.requestEnd()),{requestAble:t,isRequest:!0}),l),this}};return Jr(s,c,"drag",p,"Start",v(v({},u.requestStart(e)),{requestAble:t,isRequest:!0}),l),l?f.request(e).requestEnd():f},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var t=this.state,e=this.props,r=t.originalBeforeOrigin,n=t.transformOrigin,a=t.allMatrix,i=t.is3d,s=t.pos1,u=t.pos2,l=t.pos3,c=t.pos4,p=t.left,f=t.top,d=e.padding||{},g=d.left,h=void 0===g?0:g,v=d.top,b=void 0===v?0:v,m=d.bottom,O=void 0===m?0:m,x=d.right,S=void 0===x?0:x,j=i?4:3,E=e.groupable?r:Object(o.s)(r,[p,f]);t.renderPoses=[Object(o.s)(s,xt(a,[-h,-b],n,E,j)),Object(o.s)(u,xt(a,[S,-b],n,E,j)),Object(o.s)(l,xt(a,[-h,O],n,E,j)),Object(o.s)(c,xt(a,[S,O],n,E,j))]},r.checkUpdate=function(){var t=this.props,e=t.target,r=t.container,n=t.parentMoveable,a=this.state,i=a.target,o=a.container;(i||e)&&(this.updateAbles(),(!gt(i,e)||!gt(o,r))&&(this.updateState({target:e,container:r}),n||!r&&!this.controlBox||this.updateRect("End",!1,!1)))},r.triggerEvent=function(t,e){var r=this.props[t];return r&&r(e)},r.useCSS=function(t,e){var r=this.props.customStyledMap,n=t+e;return r[n]||(r[n]=Object(d.a)(t,e)),r[n]},r.unsetAbles=function(){var t=this;this.targetAbles.filter((function(e){return!!e.unset&&(e.unset(t),!0)})).length&&this.forceUpdate()},r.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props,n=r.triggerAblesSimultaneously,a=t.filter((function(t){return t&&(t.always||r[t.name])})),i="drag"+e+"ControlStart",o=dt(a,["drag"+e+"Start","pinch"+e+"Start"],n),s=dt(a,[i],n);this.enabledAbles=a,this.targetAbles=o,this.controlAbles=s},r.updateState=function(t,e){if(e)this.setState(t);else{var r=this.state;for(var n in t)r[n]=t[n]}},r.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},r.renderAbles=function(){var t=this,e=this.props.triggerAblesSimultaneously,r={createElement:p.createElement};return function(t,e){var r=[],n={};return t.forEach((function(a,i){var o=e(a,i,t),s=n[o];s||(s=[],n[o]=s,r.push(s)),s.push(a)})),r}(vt(dt(this.getEnabledAbles(),["render"],e).map((function(e){return(0,e.render)(t,r)||[]}))).filter((function(t){return t})),(function(t){return t.key})).map((function(t){return t[0]}))},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:50,cssStyled:null,customStyledMap:{},props:{}},e}(p.PureComponent),nn={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,e){var r=t.props.targets||[];t.moveables=[];var n=t.state,i={left:n.left,top:n.top};return r.map((function(r,n){return e.createElement(rn,{key:"moveable"+n,ref:Object(a.d)(t,"moveables",n),target:r,origin:!1,cssStyled:t.props.cssStyled,customStyledMap:t.props.customStyledMap,parentMoveable:t,parentPosition:i})}))}};function an(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),v(v({},t),{datas:e})}var on={name:"edgeDraggable",props:{edgeDraggable:Boolean},events:{},dragControlCondition:function(t,e){if(!e.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return Object(i.n)(r,w("direction"))&&Object(i.n)(r,w("line"))},dragControlStart:function(t,e){return er.dragStart(t,an(e))},dragControl:function(t,e){return er.drag(t,an(e))},dragControlEnd:function(t,e){return er.dragEnd(t,an(e))},dragGroupControlCondition:function(t,e){if(!e.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return Object(i.n)(r,w("direction"))&&Object(i.n)(r,w("line"))},dragGroupControlStart:function(t,e){return er.dragGroupStart(t,an(e))},dragGroupControl:function(t,e){return er.dragGroup(t,an(e))},dragGroupControlEnd:function(t,e){return er.dragGroupEnd(t,an(e))},unset:function(t){t.state.dragInfo=null}},sn={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},un=[Kr,Cr,tr,Rt,er,on,pr,fr,dr,vr,yr,Dr,Er,Vr,Lr,Zr,nn,sn,{name:"clickable",props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.state.target,n=e.inputEvent,a=e.inputTarget;if(n&&a&&!e.isDrag&&!t.isMoveableElement(a)){var i=r.contains(a);pt(t,"onClick",lt(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:r===a,containsTarget:i}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.inputTarget;if(r&&n&&!e.isDrag&&!t.isMoveableElement(n)&&e.datas.inputTarget!==n){var a=t.props.targets,o=a.indexOf(n),s=o>-1,u=!1;-1===o&&(u=(o=Object(i.i)(a,(function(t){return t.contains(n)})))>-1),pt(t,"onClickGroup",lt(t,e,{isDouble:e.isDouble,targets:a,inputTarget:n,targetIndex:o,isTarget:s,containsTarget:u}))}}},jr,$r],ln=un.reduce((function(t,e){return v(v({},t),e.events)}),{}),cn=un.reduce((function(t,e){return v(v({},t),e.props)}),{}),pn=Mt(ln);Object.keys(pn),Object.keys(cn);function fn(t,e){return Math.max.apply(Math,t.map((function(t){var r=t[0],n=t[1],a=t[2],i=t[3];return Math.max(r[e],n[e],a[e],i[e])})))}function dn(t,e){return Math.min.apply(Math,t.map((function(t){var r=t[0],n=t[1],a=t[2],i=t[3];return Math.min(r[e],n[e],a[e],i[e])})))}var gn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new l.a,e.moveables=[],e.transformOrigin="50% 50%",e}h(e,t);var r=e.prototype;return r.updateEvent=function(t){var e=this.state,r=this.props,n=t.dragTarget||e.target,a=r.dragTarget||this.areaElement;n!==a&&(ut(this,"targetGesto"),ut(this,"controlGesto"),e.target=null),e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=Qr(this,a,"Group"),this.controlGesto=tn(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var i=!gt(t.container,r.container);i&&(e.container=r.container);var o=this.differ.update(r.targets),s=o.added,u=o.changed,l=o.removed;(i||s.length||u.length||l.length)&&this.updateRect()},r.checkUpdate=function(){this.updateAbles()},r.updateRect=function(t,e,r){if(void 0===r&&(r=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var n=this.state,a=this.props,i=n.target||a.target;(!e||""!==t&&a.updateGroup)&&(this.rotation=a.defaultGroupRotate,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var s=this.rotation,l=this.scale,c=function(t,e){if(!t.length)return[0,0,0,0];var r=t.map((function(t){return it(t.state)})),n=C,a=C,i=0,s=0,u=ot(e,M);if(u%90){var l=u/180*Math.PI,c=Math.tan(l),p=-1/c,f=[D,C],d=[D,C];r.forEach((function(t){t.forEach((function(t){var e=t[1]-c*t[0],r=t[1]-p*t[0];f[0]=Math.max(f[0],e),f[1]=Math.min(f[1],e),d[0]=Math.max(d[0],r),d[1]=Math.min(d[1],r)}))})),f.forEach((function(t){d.forEach((function(e){var r=(e-t)/(c-p),i=c*r+t;n=Math.min(n,r),a=Math.min(a,i)}))}));var g=r.map((function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return[Object(o.t)(e,-l),Object(o.t)(r,-l),Object(o.t)(n,-l),Object(o.t)(a,-l)]}));i=fn(g,0)-dn(g,0),s=fn(g,1)-dn(g,1)}else if(n=dn(r,0),a=dn(r,1),i=fn(r,0)-n,s=fn(r,1)-a,u%180){var h=i;i=s,s=h}return[n,a,i,s]}(this.moveables,s),p=c[0],f=c[1],d=c[2],g=c[3],h="rotate("+s+"deg) scale("+(l[0]>=0?1:-1)+", "+(l[1]>=0?1:-1)+")";i.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+d+"px; height:"+g+"px;transform:"+h,n.width=d,n.height=g;var b=this.getContainer(),m=et(this.controlBox.getElement(),i,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||b),O=[m.left,m.top],x=it(m),S=x[0],j=x[1],E=x[2],y=x[3],R=Object(u.c)([S,j,E,y]),z=[R.minX,R.minY];m.pos1=Object(o.p)(S,z),m.pos2=Object(o.p)(j,z),m.pos3=Object(o.p)(E,z),m.pos4=Object(o.p)(y,z),m.left=p-m.left+z[0],m.top=f-m.top+z[1],m.origin=Object(o.p)(Object(o.s)(O,m.origin),z),m.beforeOrigin=Object(o.p)(Object(o.s)(O,m.beforeOrigin),z),m.originalBeforeOrigin=Object(o.s)(O,m.originalBeforeOrigin);var G=m.targetClientRect,B=l[0]*l[1]>0?1:-1;G.top+=m.top-n.top,G.left+=m.left-n.left,i.style.transform="translate("+-z[0]+"px, "+-z[1]+"px) "+h,this.updateState(v(v({},m),{direction:B,beforeDirection:B}),r)}},r.getRect=function(){return v(v({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},r.triggerEvent=function(e,r,n){if(n||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,r)},r.updateAbles=function(){t.prototype.updateAbles.call(this,b(this.props.ables,[nn]),"Group")},e.defaultProps=v(v({},rn.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(rn),hn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}h(e,t);var r=e.prototype;return r.render=function(){var t=this,e=this.props,r=e.cspNonce,n=e.cssStyled,i=e.targets;return Object(p.createElement)(n,{cspNonce:r,ref:Object(a.c)(this,"controlBox"),className:w("control-box")},i.map((function(e,r){return Object(p.createElement)(rn,v({key:"moveable"+r,ref:Object(a.d)(t,"moveables",r)},t.props,{target:e,wrapperMoveable:t}))})))},r.componentDidUpdate=function(){},r.updateRect=function(t,e,r){void 0===r&&(r=!0),this.moveables.forEach((function(n){n.updateRect(t,e,r)}))},r.getRect=function(){return v(v({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},r.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},r.dragStart=function(){return this},r.hitTest=function(){return 0},r.isInside=function(){return!1},r.isDragging=function(){return!1},r.updateRenderPoses=function(){},r.updateEvent=function(){},r.checkUpdate=function(){},r.triggerEvent=function(){},r.updateAbles=function(){},e}(rn),vn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e}h(e,t);var r=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var r=e.css;r&&r.forEach((function(e){t[e]=!0}))}));var e=Object(i.k)(t).join("\n");this.defaultStyled=Object(d.a)("div",Object(a.a)(S,j+e))},e.getTotalAbles=function(){return b([Cr,nn,sn,jr],this.defaultAbles)},r.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,r=e.ables,n=e.props,o=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]])}return r}(e,["ables","props"]),s=Ct(o.target||o.targets),u=function(t,e){var r=[];return t.forEach((function(t){t&&(Object(i.r)(t)?e[t]&&r.push.apply(r,e[t]):r.push(t))})),r}(s,this.selectorMap);this.refTargets=s;var l=u.length>1,c=b(t.getTotalAbles(),r||[]),f=v(v(v({},o),n||{}),{ables:c,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return l?o.individualGroupable?Object(p.createElement)(hn,v({key:"individual-group",ref:Object(a.c)(this,"moveable")},f,{target:null,targets:u})):Object(p.createElement)(gn,v({key:"group",ref:Object(a.c)(this,"moveable")},f,{target:null,targets:u})):Object(p.createElement)(rn,v({key:"single",ref:Object(a.c)(this,"moveable")},f,{target:u[0]}))},r.componentDidMount=function(){this.updateRefs()},r.componentDidUpdate=function(){this.updateRefs()},r.updateRefs=function(t){var e=Ct(this.props.target||this.props.targets),r=this.refTargets.some((function(t,r){var n=e[r];return!(!t&&!n)&&t!==n})),n=t?{}:this.selectorMap,a={};this.refTargets.forEach((function(t){Object(i.r)(t)&&(n[t]?a[t]=n[t]:(r=!0,a[t]=[].slice.call(document.querySelectorAll(t))))})),this.selectorMap=a,r&&this.forceUpdate()},r.getManager=function(){return this.moveable},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,r,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);i>3&&o&&Object.defineProperty(e,r,o)}([Object(a.e)(B)],e.prototype,"moveable",void 0),e}(p.PureComponent),bn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.defaultAbles=un,e}(vn);e.a=bn}}]);
//# sourceMappingURL=5c8e84aa.b4d54325ab9c8dc17856.js.map